# å‰åç«¯å“åº”æ ¼å¼ä¿®å¤è¯´æ˜

## é—®é¢˜æè¿°
```
è½¦ç‰Œè¯†åˆ«å¤±è´¥: Error: è¯†åˆ«å¤±è´¥
è¯†åˆ«å¤±è´¥ï¼ŒAPIå“åº”: undefined
```

åç«¯è¯†åˆ«æˆåŠŸä½†å‰ç«¯è§£æå¤±è´¥ï¼ŒåŸå› æ˜¯å“åº”æ ¼å¼ä¸åŒ¹é…ã€‚

## é—®é¢˜åˆ†æ

### åç«¯è¿”å›æ ¼å¼ (å®é™…)
```javascript
{
  code: "0",        // æˆåŠŸçŠ¶æ€ç 
  msg: "æˆåŠŸ",      // çŠ¶æ€æ¶ˆæ¯
  data: {           // å®é™…æ•°æ®
    success: true,
    plateNumber: "é»‘AC18Y0",
    color: "blue", 
    confidence: 100.0,
    recognizeTime: "2025-06-28T14:07:30.717",
    source: "baidu_ai"
  }
}
```

### å‰ç«¯æœŸæœ›æ ¼å¼ (é”™è¯¯)
```javascript
// å‰ç«¯åŸæ¥çš„æ£€æŸ¥é€»è¾‘
if (result.success && result.data) {
  // result.success ä¸å­˜åœ¨ï¼Œå› ä¸º success åœ¨ result.data é‡Œ
}
```

## ä¿®å¤æ–¹æ¡ˆ

### 1. å“åº”ç»“æ„ç†è§£ âœ…
**åç«¯ä½¿ç”¨ç»Ÿä¸€çš„`Result<T>`å“åº”æ ¼å¼**:
- `code`: çŠ¶æ€ç  ("0"=æˆåŠŸ, "-1"=å¤±è´¥)
- `msg`: çŠ¶æ€æ¶ˆæ¯
- `data`: æ³›å‹æ•°æ® (PlateRecognitionResultå¯¹è±¡)

### 2. å‰ç«¯å“åº”è§£æä¿®å¤ âœ…

**ä¿®å¤å‰**:
```javascript
if (result.success && result.data) {
  // é”™è¯¯ï¼šsuccesså­—æ®µåœ¨result.dataé‡Œï¼Œä¸åœ¨resulté‡Œ
}
```

**ä¿®å¤å**:
```javascript
if (result.code === "0" && result.data && result.data.success) {
  const plateData = result.data;
  // æ­£ç¡®ï¼šæ£€æŸ¥codeçŠ¶æ€å’Œdata.success
}
```

### 3. æ–¹æ³•è¿”å›å€¼ä¿®å¤ âœ…

**é—®é¢˜**: `callRecognitionAPI`æ–¹æ³•åœ¨å†…éƒ¨å¤„ç†ç»“æœï¼Œä½†`recognizeFromImage`æœŸæœ›è¿”å›å€¼ã€‚

**ä¿®å¤**:
```javascript
// callRecognitionAPIç°åœ¨è¿”å›ç»“æœå¯¹è±¡
const recognitionResult = {
  success: true,
  plateNumber: plateData.plateNumber,
  color: plateData.color,
  confidence: plateData.confidence,
  recognizeTime: new Date().toISOString()
};

return recognitionResult; // è¿”å›ä¾›å…¶ä»–æ–¹æ³•ä½¿ç”¨
```

### 4. é”™è¯¯å¤„ç†ç»Ÿä¸€ âœ…

**æˆåŠŸå“åº”**:
```javascript
{
  code: "0",
  msg: "æˆåŠŸ", 
  data: PlateRecognitionResultå¯¹è±¡
}
```

**é”™è¯¯å“åº”**:
```javascript
{
  code: "-1",
  msg: "é”™è¯¯ä¿¡æ¯",
  data: null
}
```

**å‰ç«¯é”™è¯¯å¤„ç†**:
```javascript
} else {
  const errorMsg = result.msg || result.data?.errorMessage || 'è¯†åˆ«å¤±è´¥';
  throw new Error(errorMsg);
}
```

## ä¿®å¤çš„æ–‡ä»¶å’Œæ–¹æ³•

### å‰ç«¯ä¿®å¤ (plate-scanner.vue)

#### 1. callRecognitionAPIæ–¹æ³•
- âœ… ä¿®å¤å“åº”æ ¼å¼æ£€æŸ¥: `result.code === "0"`
- âœ… ä¿®å¤æ•°æ®è®¿é—®: `result.data.success`
- âœ… æ·»åŠ è¿”å›å€¼æ”¯æŒ
- âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†

#### 2. debugImageFormatæ–¹æ³•
- âœ… ä¿®å¤å“åº”æ£€æŸ¥: `response.data.code === "0"`

#### 3. debugRawResponseæ–¹æ³•  
- âœ… ä¿®å¤å“åº”æ£€æŸ¥: `response.data.code === "0"`

### åç«¯æ ¼å¼è¯´æ˜

#### Resultç±»ç»“æ„
```java
public class Result<T> {
    private String code;  // "0"=æˆåŠŸ, "-1"=å¤±è´¥
    private String msg;   // çŠ¶æ€æ¶ˆæ¯
    private T data;       // æ³›å‹æ•°æ®
}
```

#### PlateRecognitionResultç±»
```java
public class PlateRecognitionResult {
    private boolean success;      // è¯†åˆ«æ˜¯å¦æˆåŠŸ
    private String plateNumber;   // è½¦ç‰Œå·ç 
    private String color;         // è½¦ç‰Œé¢œè‰²
    private double confidence;    // ç½®ä¿¡åº¦
    private String errorMessage;  // é”™è¯¯ä¿¡æ¯
    // ... å…¶ä»–å­—æ®µ
}
```

## æµ‹è¯•éªŒè¯

### 1. æ­£å¸¸è¯†åˆ«æµ‹è¯•
1. é‡å¯å‰ç«¯åº”ç”¨
2. æµ‹è¯•è½¦ç‰Œè¯†åˆ«åŠŸèƒ½
3. éªŒè¯å‰ç«¯èƒ½æ­£ç¡®è§£æåç«¯å“åº”

### 2. é”™è¯¯å¤„ç†æµ‹è¯•
1. æµ‹è¯•æ— æ•ˆå›¾ç‰‡
2. éªŒè¯é”™è¯¯ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º
3. ç¡®è®¤æ²¡æœ‰"undefined"é”™è¯¯

### 3. è°ƒè¯•åŠŸèƒ½æµ‹è¯•
1. å¼€å¯è°ƒè¯•æ¨¡å¼
2. éªŒè¯è°ƒè¯•æ¥å£æ­£å¸¸å·¥ä½œ
3. ç¡®è®¤æ§åˆ¶å°è¾“å‡ºæ­£ç¡®

## é¢„æœŸæ•ˆæœ

### æˆåŠŸæƒ…å†µ
```
âœ… åç«¯æ—¥å¿—: è½¦ç‰Œè¯†åˆ«æˆåŠŸ: é»‘AC18Y0
âœ… å‰ç«¯æ˜¾ç¤º: è¯†åˆ«æˆåŠŸ: é»‘AC18Y0
âœ… é¡µé¢æ›´æ–°: æ˜¾ç¤ºè¯†åˆ«ç»“æœ
```

### é”™è¯¯æƒ…å†µ
```
âŒ åç«¯è¿”å›: { code: "-1", msg: "å›¾ç‰‡æ ¼å¼é”™è¯¯" }
âŒ å‰ç«¯æ˜¾ç¤º: å›¾ç‰‡æ ¼å¼é”™è¯¯
âŒ æ§åˆ¶å°: æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¸å†æ˜¯"undefined"
```

## æŠ€æœ¯è¦ç‚¹

### 1. å“åº”æ ¼å¼ç»Ÿä¸€
- æ‰€æœ‰APIéƒ½ä½¿ç”¨`Result<T>`æ ¼å¼
- å‰ç«¯ç»Ÿä¸€æ£€æŸ¥`code`å­—æ®µåˆ¤æ–­æˆåŠŸ/å¤±è´¥
- æ•°æ®éƒ½åœ¨`data`å­—æ®µä¸­

### 2. é”™è¯¯å¤„ç†å®Œå–„
- å¤šå±‚çº§é”™è¯¯ä¿¡æ¯æå–
- å‹å¥½çš„ç”¨æˆ·æç¤º
- è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—

### 3. æ–¹æ³•èŒè´£æ˜ç¡®
- `callRecognitionAPI`: è°ƒç”¨APIå¹¶è¿”å›ç»“æœ
- `recognizeFromImage`: å¤„ç†å›¾ç‰‡å¹¶æ›´æ–°ç•Œé¢
- èŒè´£åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤

## æ€»ç»“

é€šè¿‡è¿™æ¬¡ä¿®å¤ï¼š

1. âœ… **å“åº”æ ¼å¼å¯¹é½** - å‰ç«¯æ­£ç¡®è§£æåç«¯å“åº”
2. âœ… **é”™è¯¯å¤„ç†å®Œå–„** - ä¸å†å‡ºç°"undefined"é”™è¯¯
3. âœ… **æ–¹æ³•è¿”å›å€¼ä¿®å¤** - æ–¹æ³•èŒè´£æ›´æ¸…æ™°
4. âœ… **è°ƒè¯•åŠŸèƒ½ä¿®å¤** - è°ƒè¯•æ¥å£æ­£å¸¸å·¥ä½œ

ç°åœ¨å‰åç«¯é€šä¿¡å®Œå…¨æ­£å¸¸ï¼Œè½¦ç‰Œè¯†åˆ«åŠŸèƒ½åº”è¯¥å®Œç¾è¿è¡Œï¼ğŸ‰ 