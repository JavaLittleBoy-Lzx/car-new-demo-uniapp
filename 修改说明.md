# è½¦ç‰Œè¯†åˆ«çª—å£ä¼˜åŒ–ä¿®æ”¹è¯´æ˜

## å·²å®Œæˆçš„ä¿®æ”¹

### 1. å¢å¤§è½¦ç‰Œè¯†åˆ«çª—å£å°ºå¯¸
- âœ… ç¬¬ä¸€ä¸ªæ‘„åƒå¤´å®¹å™¨ï¼šä» 500rpx å¢åŠ åˆ° **800rpx**
- âœ… ç¬¬äºŒä¸ªæ‘„åƒå¤´å®¹å™¨ï¼šä» 600rpx å¢åŠ åˆ° **800rpx**
- âœ… ç¬¬ä¸€ä¸ªè½¦ç‰Œæ¡†ï¼šå®½åº¦ 300rpxâ†’**450rpx**ï¼Œé«˜åº¦ 120rpxâ†’**180rpx**

### 2. å¾…å®Œæˆçš„ä¿®æ”¹
- â³ ç¬¬äºŒä¸ªè½¦ç‰Œæ¡†å°ºå¯¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹
- â³ æ·»åŠ è¯†åˆ«é”™è¯¯æ¬¡æ•°é”å®šé€»è¾‘

## æ‰‹åŠ¨ä¿®æ”¹æŒ‡å¼•

### ä¿®æ”¹ç¬¬äºŒä¸ªè½¦ç‰Œæ¡†å°ºå¯¸ï¼ˆçº¦ç¬¬6528-6536è¡Œï¼‰
æ‰¾åˆ°ä»¥ä¸‹ä»£ç ï¼š
```css
/* è½¦ç‰Œæ¡†é€‰åŒºåŸŸ */
.plate-frame {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	width: 300rpx;   /* æ”¹ä¸º 450rpx */
	height: 120rpx;  /* æ”¹ä¸º 180rpx */
	border: 4rpx solid transparent;
}
```

ä¿®æ”¹ä¸ºï¼š
```css
/* è½¦ç‰Œæ¡†é€‰åŒºåŸŸ */
.plate-frame {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	width: 450rpx;
	height: 180rpx;
	border: 4rpx solid transparent;
}
```

### æ·»åŠ è¯†åˆ«é”™è¯¯æ¬¡æ•°é”å®šï¼ˆçº¦ç¬¬920è¡Œä¹‹åï¼‰
åœ¨ `lastRecognizeTime: 0,` ä¹‹åæ·»åŠ ï¼š
```javascript
// ğŸ†• è¯†åˆ«é”™è¯¯æ¬¡æ•°é”å®š
recognitionFailedCount: 0, // è¯†åˆ«å¤±è´¥æ¬¡æ•°
recognitionLocked: false, // è¯†åˆ«æ˜¯å¦è¢«é”å®š
recognitionLockTime: null, // é”å®šæ—¶é—´
recognitionLockDuration: 60000, // é”å®šæ—¶é•¿ï¼ˆ60ç§’ï¼‰
maxRecognitionFailures: 3, // æœ€å¤§è¯†åˆ«å¤±è´¥æ¬¡æ•°
```

## å‚è€ƒpages/violation/add-violation.vueçš„è¯†åˆ«é€»è¾‘

è¯¥æ–‡ä»¶ç›®å‰æ²¡æœ‰è¯†åˆ«é”™è¯¯æ¬¡æ•°é”å®šé€»è¾‘ï¼Œéœ€è¦ä»å¤´å®ç°ã€‚å»ºè®®æ·»åŠ ä»¥ä¸‹æ–¹æ³•ï¼š

```javascript
// æ£€æŸ¥è¯†åˆ«é”å®šçŠ¶æ€
checkRecognitionLock() {
	if (this.recognitionLocked) {
		const now = Date.now();
		const elapsed = now - this.recognitionLockTime;
		if (elapsed >= this.recognitionLockDuration) {
			// è§£é”
			this.recognitionLocked = false;
			this.recognitionFailedCount = 0;
			this.recognitionLockTime = null;
			return false;
		} else {
			const remainingSeconds = Math.ceil((this.recognitionLockDuration - elapsed) / 1000);
			uni.showToast({
				title: `è¯†åˆ«å·²é”å®šï¼Œè¯·ç­‰å¾…${remainingSeconds}ç§’`,
				icon: 'none'
			});
			return true;
		}
	}
	return false;
},

// è¯†åˆ«å¤±è´¥å¤„ç†
handleRecognitionFailure() {
	this.recognitionFailedCount++;
	if (this.recognitionFailedCount >= this.maxRecognitionFailures) {
		this.recognitionLocked = true;
		this.recognitionLockTime = Date.now();
		uni.showModal({
			title: 'è¯†åˆ«å·²é”å®š',
			content: `è¯†åˆ«é”™è¯¯${this.maxRecognitionFailures}æ¬¡ï¼Œå·²é”å®š${this.recognitionLockDuration/1000}ç§’`,
			showCancel: false
		});
	}
},

// è¯†åˆ«æˆåŠŸå¤„ç†
handleRecognitionSuccess() {
	this.recognitionFailedCount = 0;
}
```

åœ¨ `recognizeFromImage` æ–¹æ³•ä¸­è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚
