<template>
	<view class="auth-container">
		<!-- èƒŒæ™¯æ¸å˜ -->
		<view class="bg-gradient"></view>

		<!-- é¡¶éƒ¨è£…é¥°æ³¢æµª -->
		<view class="wave-decoration">
			<view class="wave wave-1"></view>
			<view class="wave wave-2"></view>
		</view>
		<!-- ä¸»å†…å®¹ -->
		<view class="main-content">
			<!-- é¡¶éƒ¨åŒºåŸŸ -->
			<view class="header-section">
				<view class="logo-container">
					<view class="logo-bg">
						<text class="logo-icon">â›„</text>
					</view>
					<text class="app-title">é›ªäººåœè½¦</text>
					<text class="app-subtitle">Snowman Parking</text>
				</view>
			</view>
			<!-- ä¸­é—´å†…å®¹åŒºåŸŸ -->
			<view class="content-section">
				<view class="welcome-text">
					<text class="welcome-title">æ¬¢è¿ä½¿ç”¨</text>
					<text class="welcome-desc">è¯·æˆæƒæ‰‹æœºå·ä»¥è·å¾—æ›´å¥½çš„æœåŠ¡ä½“éªŒ</text>
					<view class="process-tips">
						<text class="tips-title">ğŸ” èº«ä»½éªŒè¯æµç¨‹ï¼š</text>
						<text class="tips-item">1. è·å–å¾®ä¿¡æˆæƒä¿¡æ¯</text>
						<text class="tips-item">2. éªŒè¯ç”¨æˆ·èº«ä»½</text>
						<text class="tips-item">3. åŒ¹é…ç”¨æˆ·è§’è‰²æƒé™</text>
						<text class="tips-note">â° æ•´ä¸ªè¿‡ç¨‹é¢„è®¡éœ€è¦5-10ç§’</text>
					</view>
				</view>

				<!-- åŠŸèƒ½äº®ç‚¹ -->
				<view class="highlights-section">
					<view class="highlight-item">
						<view class="icon-container">
							<view class="icon-bg icon-blue">
								<text class="icon">ğŸ…¿ï¸</text>
							</view>
							<view class="icon-ring"></view>
						</view>
						<view class="content">
							<text class="title">æ™ºèƒ½é¢„çº¦</text>
							<text class="desc">ä¾¿æ·é¢„çº¦ï¼Œæ™ºèƒ½ç®¡ç†è½¦ä½</text>
						</view>
					</view>
					<view class="highlight-item">
						<view class="icon-container">
							<view class="icon-bg icon-green">
								<text class="icon">ğŸ”</text>
							</view>
							<view class="icon-ring"></view>
						</view>
						<view class="content">
							<text class="title">å®‰å…¨å¯é </text>
							<text class="desc">å¾®ä¿¡å®˜æ–¹æˆæƒä¿éšœå®‰å…¨</text>
						</view>
					</view>
					<view class="highlight-item">
						<view class="icon-container">
							<view class="icon-bg icon-orange">
								<text class="icon">âš¡</text>
							</view>
							<view class="icon-ring"></view>
						</view>
						<view class="content">
							<text class="title">ä¸€é”®ç™»å½•</text>
							<text class="desc">æ— éœ€æ³¨å†Œï¼Œå³ç‚¹å³ç”¨</text>
						</view>
					</view>
				</view>
			</view>
			<!-- åº•éƒ¨æˆæƒåŒºåŸŸ -->
			<view class="auth-section">
				<button class="auth-button" :class="{ loading: loading }"
					:open-type="agreeTerms ? 'getPhoneNumber' : ''" @getphonenumber="onGetPhoneNumber"
					@click="onAuthButtonClick" :disabled="loading">
					<view class="button-content">
						<text class="wechat-icon">ğŸ’¬</text>
						<text class="button-text">{{ loading ? 'æˆæƒä¸­...' : 'å¾®ä¿¡ä¸€é”®ç™»å½•' }}</text>
					</view>
					<view v-if="loading" class="loading-wave"></view>
				</button>
				<view class="privacy-notice">
					<!-- åè®®åŒæ„åŒºåŸŸ -->
					<view class="agreement-section" :class="{ shaking: agreementShaking }">
						<!-- æç¤ºæ¡† -->
						<view v-if="showAgreementTip" class="agreement-tip">
							<text class="tip-text">è¯·å…ˆå‹¾é€‰åŒæ„åå†è¿›è¡Œç™»å½•</text>
						</view>

						<label class="agreement-item">
							<checkbox-group @change="onAgreeChange">
								<checkbox :value="'agree'" :checked="agreeTerms" color="#1677ff" />
							</checkbox-group>
							<text class="agreement-text">
								æˆ‘å·²é˜…è¯»å¹¶åŒæ„
								<text class="notice-link" @tap="showServiceAgreement">ã€Šç”¨æˆ·åè®®ã€‹</text>
								<text class="notice-text">å’Œ</text>
								<text class="notice-link" @tap="showPrivacyPolicy">ã€Šéšç§æ”¿ç­–ã€‹</text>
							</text>
						</label>
					</view>

					<!-- éšç§æç¤º -->
					<!-- <view class="privacy-tips">
						<text class="privacy-tip">ğŸ”’ æˆ‘ä»¬æ‰¿è¯ºä¿æŠ¤æ‚¨çš„éšç§å®‰å…¨</text>
						<text class="privacy-tip">ğŸ“± ä»…ç”¨äºèº«ä»½éªŒè¯ï¼Œä¸ä¼šæ³„éœ²ä¸ªäººä¿¡æ¯</text>
					</view> -->
				</view>
			</view>
		</view>

		<!-- å…¨å±åŠ è½½ -->
		<view v-if="showLoading" class="fullscreen-loading">
			<view class="loading-card">
				<!-- è¿›åº¦æ¡ -->
				<view class="progress-container">
					<view class="progress-bar">
						<view class="progress-fill" :style="{ width: progressPercentage + '%' }"></view>
					</view>
					<text class="progress-text">{{ progressPercentage }}%</text>
				</view>

				<!-- é˜¶æ®µæŒ‡ç¤ºå™¨ -->
				<view class="stage-indicators">
					<view class="stage-item" :class="{ active: currentStage >= 1, completed: currentStage > 1 }">
						<view class="stage-icon">1</view>
						<text class="stage-label">å¾®ä¿¡æˆæƒ</text>
					</view>
					<view class="stage-connector" :class="{ active: currentStage >= 2 }"></view>
					<view class="stage-item" :class="{ active: currentStage >= 2, completed: currentStage > 2 }">
						<view class="stage-icon">2</view>
						<text class="stage-label">èº«ä»½éªŒè¯</text>
					</view>
					<view class="stage-connector" :class="{ active: currentStage >= 3 }"></view>
					<view class="stage-item" :class="{ active: currentStage >= 3, completed: currentStage > 3 }">
						<view class="stage-icon">3</view>
						<text class="stage-label">è®¾ç½®ç”¨æˆ·</text>
					</view>
				</view>

				<!-- åŠ¨æ€loadingå›¾æ ‡ -->
				<view class="loading-animation">
					<view class="searching-icon" v-if="currentStage === 2">
						<view class="radar-circle"></view>
						<view class="radar-circle"></view>
						<view class="radar-circle"></view>
						<text class="search-text">ğŸ”</text>
					</view>
					<view class="loading-dots" v-else>
						<view class="dot dot-1"></view>
						<view class="dot dot-2"></view>
						<view class="dot dot-3"></view>
					</view>
				</view>

				<!-- ä¸»è¦æç¤ºæ–‡æœ¬ -->
				<text class="loading-text">{{ loadingText }}</text>

				<!-- è€å¿ƒç­‰å¾…æç¤º -->
				<view class="patience-tips" v-if="currentStage === 2 && showPatienceTip">
					<text class="tip-item">ğŸ” æ­£åœ¨æŸ¥è¯¢æ‚¨çš„ä¿¡æ¯</text>
					<text class="tip-item">â° å¤–éƒ¨æœåŠ¡æŸ¥è¯¢éœ€è¦ä¸€ç‚¹æ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…</text>
					<text class="tip-item">ğŸ¯ æˆ‘ä»¬æ­£åœ¨ä¸ºæ‚¨åŒ¹é…æœ€åˆé€‚çš„æƒé™</text>
				</view>

				<!-- å€’è®¡æ—¶æˆ–å·²ç”¨æ—¶é—´ -->
				<view class="time-indicator" v-if="currentStage === 2">
					<text class="time-text">å·²ç”¨æ—¶é—´: {{ formatTime(elapsedTime) }}</text>
					<text class="time-text" v-if="elapsedTime < 10">é¢„è®¡å‰©ä½™:
						{{ formatTime(Math.max(0, 10 - elapsedTime)) }}</text>
				</view>
			</view>
		</view>

		<!-- åè®®æŸ¥çœ‹å¼¹çª— -->
		<view v-if="showAgreementModal" class="agreement-modal">
			<view class="modal-container">
				<view class="modal-header">
					<text class="modal-title">{{ currentAgreementTitle }}</text>
					<text class="close-btn" @tap="closeAgreementModal">âœ•</text>
				</view>
				<scroll-view class="modal-body" scroll-y>
					<text class="agreement-content">{{ currentAgreementContent }}</text>
				</scroll-view>
				<view class="modal-footer">
					<button class="agreement-confirm-btn" @click="onAgreementConfirm">
						æˆ‘å·²é˜…è¯»
					</button>
				</view>
			</view>
		</view>


	</view>
</template>

<script>
	// æ”¹ä¸ºé™æ€å¯¼å…¥ï¼Œé¿å…åŠ¨æ€importé—®é¢˜
	import AuthUtils from '@/utils/auth.js'
	import DynamicTabBarManager from '@/utils/dynamicTabBar.js'

	export default {
		data() {
			return {
				loading: false,
				showLoading: false,
				loadingText: 'æ­£åœ¨æˆæƒ...',
				// è¿›åº¦ç®¡ç†
				currentStage: 0, // 0=æœªå¼€å§‹, 1=å¾®ä¿¡æˆæƒ, 2=èº«ä»½éªŒè¯, 3=è®¾ç½®ç”¨æˆ·, 4=å®Œæˆ
				progressPercentage: 0,
				showPatienceTip: false,
				// æ—¶é—´è¿½è¸ª
				startTime: 0,
				elapsedTime: 0,
				timeInterval: null,
				// è€å¿ƒæç¤ºå®šæ—¶å™¨
				patienceTimer: null,
				// åè®®ç›¸å…³
				agreeTerms: false,
				showAgreementModal: false,
				currentAgreementTitle: '',
				currentAgreementContent: '',
				// åè®®æç¤ºç›¸å…³
				showAgreementTip: false,
				agreementShaking: false,
				serviceAgreementContent: `ç”¨æˆ·æœåŠ¡åè®®

æ¬¢è¿ä½¿ç”¨é›ªäººåœè½¦æœåŠ¡ï¼

ä¸€ã€æœåŠ¡è¯´æ˜
1. æœ¬åè®®æ˜¯æ‚¨ä¸é›ªäººåœè½¦ç³»ç»Ÿä¹‹é—´å…³äºåœè½¦æœåŠ¡ä½¿ç”¨çš„æ³•å¾‹åè®®ã€‚
2. åœè½¦æœåŠ¡åŒ…æ‹¬ä½†ä¸é™äºè½¦ä½é¢„çº¦ã€åœ¨çº¿æ”¯ä»˜ã€è¿è§„æŸ¥è¯¢ç­‰åŠŸèƒ½ã€‚
3. ä½¿ç”¨æœ¬æœåŠ¡éœ€è¦é€šè¿‡å¾®ä¿¡æˆæƒéªŒè¯æ‚¨çš„èº«ä»½ä¿¡æ¯ã€‚

äºŒã€ç”¨æˆ·æƒåˆ©ä¸ä¹‰åŠ¡
1. æ‚¨æœ‰æƒæ ¹æ®æ‚¨çš„èº«ä»½è§’è‰²ä½¿ç”¨ç›¸åº”çš„åœè½¦æœåŠ¡åŠŸèƒ½ã€‚
2. æ‚¨åº”å½“æä¾›çœŸå®ã€å‡†ç¡®çš„ä¸ªäººä¿¡æ¯å’Œè½¦è¾†ä¿¡æ¯ã€‚
3. æ‚¨åº”å½“éµå®ˆåœè½¦åœºç›¸å…³è§„å®šå’Œäº¤é€šæ³•è§„ã€‚
4. æ‚¨ä¸å¾—æ»¥ç”¨æœåŠ¡åŠŸèƒ½ï¼Œä¸å¾—ä»äº‹è¿æ³•è¿è§„æ´»åŠ¨ã€‚

ä¸‰ã€æœåŠ¡åŠŸèƒ½
1. ä¸šä¸»ç”¨æˆ·ï¼šå¯äº«å—è½¦ä½é¢„çº¦ã€è¿è§„æŸ¥è¯¢ã€åœè½¦è´¹ç¼´çº³ç­‰æœåŠ¡ã€‚
2. ç®¡å®¶ç”¨æˆ·ï¼šå¯è¿›è¡Œé¢„çº¦ç®¡ç†ã€ä¸šä¸»ä¿¡æ¯ç®¡ç†ã€è¿è§„è®°å½•ç®¡ç†ç­‰ã€‚
3. è®¿å®¢ç”¨æˆ·ï¼šå¯ç”³è¯·ä¸´æ—¶åœè½¦ã€æŸ¥çœ‹ä¸ªäººåœè½¦è®°å½•ç­‰ã€‚

å››ã€æ•°æ®å®‰å…¨
1. æˆ‘ä»¬é‡‡ç”¨ä¸šç•Œæ ‡å‡†çš„å®‰å…¨æªæ–½ä¿æŠ¤æ‚¨çš„æ•°æ®å®‰å…¨ã€‚
2. æ‚¨çš„ä¸ªäººä¿¡æ¯ä»…ç”¨äºæä¾›åœè½¦æœåŠ¡ï¼Œä¸ä¼šç”¨äºå…¶ä»–å•†ä¸šç›®çš„ã€‚
3. æˆ‘ä»¬ä¸ä¼šå‘ç¬¬ä¸‰æ–¹å‡ºå”®æˆ–æ³„éœ²æ‚¨çš„ä¸ªäººä¿¡æ¯ã€‚

äº”ã€æœåŠ¡é™åˆ¶
1. æœåŠ¡çš„å¯ç”¨æ€§å¯èƒ½å—åˆ°ç½‘ç»œã€è®¾å¤‡ç­‰å› ç´ å½±å“ã€‚
2. æˆ‘ä»¬ä¿ç•™åœ¨å¿…è¦æ—¶æš‚åœæˆ–ç»ˆæ­¢æœåŠ¡çš„æƒåˆ©ã€‚
3. å¯¹äºè¿è§„ä½¿ç”¨æœåŠ¡çš„ç”¨æˆ·ï¼Œæˆ‘ä»¬æœ‰æƒé™åˆ¶æˆ–å–æ¶ˆå…¶ä½¿ç”¨æƒé™ã€‚

å…­ã€å…è´£å£°æ˜
1. å› ä¸å¯æŠ—åŠ›å¯¼è‡´çš„æœåŠ¡ä¸­æ–­ï¼Œæˆ‘ä»¬ä¸æ‰¿æ‹…è´£ä»»ã€‚
2. å› ç”¨æˆ·è¿è§„è¡Œä¸ºå¯¼è‡´çš„åæœï¼Œç”±ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…ã€‚
3. æˆ‘ä»¬å¯¹åœè½¦åœºçš„å®é™…ç®¡ç†å’Œå®‰å…¨çŠ¶å†µä¸æ‰¿æ‹…è´£ä»»ã€‚

ä¸ƒã€åè®®ä¿®æ”¹
1. æˆ‘ä»¬ä¿ç•™ä¿®æ”¹æœ¬åè®®çš„æƒåˆ©ã€‚
2. åè®®ä¿®æ”¹åï¼Œç»§ç»­ä½¿ç”¨æœåŠ¡å³è¡¨ç¤ºåŒæ„ä¿®æ”¹åçš„åè®®ã€‚
3. é‡è¦ä¿®æ”¹ä¼šé€šè¿‡é€‚å½“æ–¹å¼é€šçŸ¥ç”¨æˆ·ã€‚

å…«ã€äº‰è®®è§£å†³
å› æœ¬åè®®äº§ç”Ÿçš„äº‰è®®ï¼ŒåŒæ–¹åº”å‹å¥½åå•†è§£å†³ï¼›åå•†ä¸æˆçš„ï¼Œæäº¤ç›¸å…³æ³•é™¢è¯‰è®¼è§£å†³ã€‚

æœ¬åè®®è‡ªæ‚¨åŒæ„ä¹‹æ—¥èµ·ç”Ÿæ•ˆã€‚

è”ç³»æˆ‘ä»¬ï¼š
- å®¢æœç”µè¯ï¼š400-888-6688
- é‚®ç®±ï¼šservice@snowmanparking.com`,
				privacyPolicyContent: `éšç§æ”¿ç­–

é›ªäººåœè½¦éå¸¸é‡è§†æ‚¨çš„éšç§ä¿æŠ¤ã€‚æœ¬éšç§æ”¿ç­–è¯¦ç»†è¯´æ˜äº†æˆ‘ä»¬å¦‚ä½•æ”¶é›†ã€ä½¿ç”¨ã€å­˜å‚¨å’Œä¿æŠ¤æ‚¨çš„ä¸ªäººä¿¡æ¯ã€‚

ä¸€ã€ä¿¡æ¯æ”¶é›†
æˆ‘ä»¬æ”¶é›†çš„ä¿¡æ¯åŒ…æ‹¬ï¼š
1. åŸºæœ¬ä¿¡æ¯ï¼šå¾®ä¿¡æˆæƒè·å–çš„å§“åã€æ‰‹æœºå·ç­‰
2. è½¦è¾†ä¿¡æ¯ï¼šè½¦ç‰Œå·ã€è½¦å‹ç­‰åœè½¦ç›¸å…³ä¿¡æ¯
3. ä½¿ç”¨ä¿¡æ¯ï¼šé¢„çº¦è®°å½•ã€åœè½¦è®°å½•ã€æ”¯ä»˜è®°å½•ç­‰
4. è®¾å¤‡ä¿¡æ¯ï¼šè®¾å¤‡å‹å·ã€æ“ä½œç³»ç»Ÿã€å”¯ä¸€è®¾å¤‡æ ‡è¯†ç¬¦ç­‰
5. ä½ç½®ä¿¡æ¯ï¼šä¸ºæä¾›ç²¾å‡†åœè½¦æœåŠ¡è€Œæ”¶é›†çš„ä½ç½®æ•°æ®

äºŒã€ä¿¡æ¯ä½¿ç”¨ç›®çš„
æˆ‘ä»¬ä½¿ç”¨æ‚¨çš„ä¿¡æ¯ç”¨äºï¼š
1. èº«ä»½éªŒè¯å’Œè´¦æˆ·ç®¡ç†
2. æä¾›åœè½¦é¢„çº¦å’Œç®¡ç†æœåŠ¡
3. å¤„ç†æ”¯ä»˜å’Œè´¹ç”¨ç»“ç®—
4. å®¢æˆ·æœåŠ¡å’ŒæŠ€æœ¯æ”¯æŒ
5. å®‰å…¨ç›‘æ§å’Œé£é™©é˜²èŒƒ
6. æœåŠ¡æ”¹è¿›å’ŒåŠŸèƒ½ä¼˜åŒ–
7. æ³•å¾‹æ³•è§„è¦æ±‚çš„å…¶ä»–ç”¨é€”

ä¸‰ã€ä¿¡æ¯å…±äº«åŸåˆ™
æˆ‘ä»¬æ‰¿è¯ºä¸ä¼šå‘ç¬¬ä¸‰æ–¹å‡ºå”®ã€å‡ºç§Ÿæˆ–äº¤æ˜“æ‚¨çš„ä¸ªäººä¿¡æ¯ï¼Œé™¤éï¼š
1. è·å¾—æ‚¨çš„æ˜ç¡®æˆæƒåŒæ„
2. æ³•å¾‹æ³•è§„æ˜ç¡®è¦æ±‚
3. å¸æ³•æœºå…³æˆ–è¡Œæ”¿æœºå…³ä¾æ³•è¦æ±‚
4. ç»´æŠ¤æˆ‘ä»¬æˆ–å…¶ä»–ç”¨æˆ·çš„åˆæ³•æƒç›Š
5. ä¸å¯ä¿¡èµ–çš„æœåŠ¡æä¾›å•†åˆ†äº«ï¼ˆä»…é™äºæä¾›æœåŠ¡æ‰€éœ€ï¼‰

å››ã€ä¿¡æ¯å­˜å‚¨ä¸å®‰å…¨
1. æ‚¨çš„ä¿¡æ¯å­˜å‚¨åœ¨å®‰å…¨å¯é çš„æœåŠ¡å™¨ä¸­
2. æˆ‘ä»¬é‡‡ç”¨åŠ å¯†æŠ€æœ¯ä¿æŠ¤æ•°æ®ä¼ è¾“å®‰å…¨
3. å®šæœŸè¿›è¡Œå®‰å…¨è¯„ä¼°å’Œæ¼æ´æ£€æµ‹
4. å»ºç«‹å®Œå–„çš„æ•°æ®è®¿é—®æƒé™ç®¡ç†åˆ¶åº¦
5. ä¿¡æ¯ä¿å­˜æœŸé™éµå¾ªç›¸å…³æ³•å¾‹æ³•è§„è¦æ±‚

äº”ã€æ‚¨çš„æƒåˆ©
æ‚¨å¯¹ä¸ªäººä¿¡æ¯äº«æœ‰ä»¥ä¸‹æƒåˆ©ï¼š
1. çŸ¥æƒ…æƒï¼šäº†è§£æˆ‘ä»¬å¦‚ä½•å¤„ç†æ‚¨çš„ä¸ªäººä¿¡æ¯
2. è®¿é—®æƒï¼šæŸ¥è¯¢æˆ‘ä»¬æŒæœ‰çš„æ‚¨çš„ä¸ªäººä¿¡æ¯
3. æ›´æ­£æƒï¼šè¦æ±‚æ›´æ­£ä¸å‡†ç¡®æˆ–ä¸å®Œæ•´çš„ä¿¡æ¯
4. åˆ é™¤æƒï¼šåœ¨ç‰¹å®šæƒ…å†µä¸‹è¦æ±‚åˆ é™¤æ‚¨çš„ä¸ªäººä¿¡æ¯
5. é™åˆ¶å¤„ç†æƒï¼šè¦æ±‚æˆ‘ä»¬é™åˆ¶å¯¹æ‚¨ä¿¡æ¯çš„å¤„ç†
6. æ•°æ®å¯æºæƒï¼šè¦æ±‚è·å¾—æ‚¨çš„ä¸ªäººä¿¡æ¯å‰¯æœ¬

å…­ã€ç¬¬ä¸‰æ–¹æœåŠ¡
æœ¬æœåŠ¡å¯èƒ½åŒ…å«ç¬¬ä¸‰æ–¹é“¾æ¥æˆ–æœåŠ¡ï¼š
1. å¾®ä¿¡æ”¯ä»˜ç­‰æ”¯ä»˜æœåŠ¡
2. åœ°å›¾å¯¼èˆªæœåŠ¡
3. å®¢æœç³»ç»Ÿç­‰
è¿™äº›ç¬¬ä¸‰æ–¹æœåŠ¡æœ‰å…¶ç‹¬ç«‹çš„éšç§æ”¿ç­–ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨ä»”ç»†é˜…è¯»ã€‚

ä¸ƒã€æœªæˆå¹´äººä¿æŠ¤
1. æˆ‘ä»¬ç‰¹åˆ«é‡è§†æœªæˆå¹´äººçš„ä¸ªäººä¿¡æ¯ä¿æŠ¤
2. å¦‚æœæ‚¨æ˜¯18å²ä»¥ä¸‹çš„æœªæˆå¹´äººï¼Œè¯·åœ¨ç›‘æŠ¤äººé™ªåŒä¸‹ä½¿ç”¨æˆ‘ä»¬çš„æœåŠ¡
3. æˆ‘ä»¬ä¸ä¼šä¸»åŠ¨æ”¶é›†æœªæˆå¹´äººçš„ä¸ªäººä¿¡æ¯

å…«ã€è·¨å¢ƒæ•°æ®ä¼ è¾“
å¦‚æœæ‚¨çš„ä¿¡æ¯éœ€è¦è·¨å¢ƒä¼ è¾“ï¼Œæˆ‘ä»¬ä¼šï¼š
1. ç¡®ä¿æ¥æ”¶æ–¹å…·å¤‡å……åˆ†çš„æ•°æ®ä¿æŠ¤æ°´å¹³
2. é‡‡å–å¿…è¦çš„å®‰å…¨ä¿éšœæªæ–½
3. éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„è¦æ±‚

ä¹ã€æ”¿ç­–æ›´æ–°
1. æˆ‘ä»¬å¯èƒ½ä¼šä¸å®šæœŸæ›´æ–°æœ¬éšç§æ”¿ç­–
2. é‡å¤§å˜æ›´ä¼šé€šè¿‡é€‚å½“æ–¹å¼é€šçŸ¥æ‚¨
3. ç»§ç»­ä½¿ç”¨æœåŠ¡å³è¡¨ç¤ºåŒæ„æ›´æ–°åçš„æ”¿ç­–

åã€è”ç³»æˆ‘ä»¬
å¦‚æ‚¨å¯¹æœ¬éšç§æ”¿ç­–æœ‰ä»»ä½•ç–‘é—®æˆ–å»ºè®®ï¼Œè¯·è”ç³»æˆ‘ä»¬ï¼š
- å®¢æœçƒ­çº¿ï¼š400-888-6688
- é‚®ç®±ï¼šprivacy@snowmanparking.com
- åœ°å€ï¼šè¯·é€šè¿‡å®¢æœè·å–è¯¦ç»†è”ç³»åœ°å€

æœ¬éšç§æ”¿ç­–æœ€åæ›´æ–°æ—¶é—´ï¼š2024å¹´12æœˆ16æ—¥`
			}
		},



		onLoad() {
			try {
				// æ£€æŸ¥æ˜¯å¦å·²ç»æˆæƒ
				this.checkAuthStatus();
			} catch (error) {
				console.error('onLoadé”™è¯¯:', error);
				this.handleInitError(error);
			}
		},

		onShow() {
			try {
				// é¡µé¢æ˜¾ç¤ºæ—¶ä¹Ÿæ£€æŸ¥ä¸€æ¬¡æˆæƒçŠ¶æ€
				this.checkAuthStatus();
			} catch (error) {
				console.error('onShowé”™è¯¯:', error);
				this.handleInitError(error);
			}
		},

		onUnload() {
			// é¡µé¢å¸è½½æ—¶æ¸…ç†å®šæ—¶å™¨
			this.resetProgress();
		},

		onHide() {
			// é¡µé¢éšè—æ—¶æš‚åœå®šæ—¶å™¨ï¼ˆå¯é€‰ï¼‰
			if (this.timeInterval) {
				clearInterval(this.timeInterval);
				this.timeInterval = null;
			}
		},

		methods: {
			// è¿›åº¦ç®¡ç†æ–¹æ³•
			startProgressTracking() {
				this.startTime = Date.now();
				this.elapsedTime = 0;
				this.currentStage = 1;
				this.progressPercentage = 10;

				// å¼€å§‹æ—¶é—´è¿½è¸ª
				this.timeInterval = setInterval(() => {
					this.elapsedTime = Math.floor((Date.now() - this.startTime) / 1000);
				}, 1000);
			},

			updateStage(stage, progress, text) {
				this.currentStage = stage;
				this.progressPercentage = progress;
				this.loadingText = text;

				// åœ¨èº«ä»½éªŒè¯é˜¶æ®µæ˜¾ç¤ºè€å¿ƒæç¤º
				if (stage === 2) {
					// 3ç§’åæ˜¾ç¤ºè€å¿ƒç­‰å¾…æç¤º
					this.patienceTimer = setTimeout(() => {
						this.showPatienceTip = true;
					}, 3000);
				}
			},

			completeProgress() {
				this.currentStage = 4;
				this.progressPercentage = 100;
				this.showPatienceTip = false;

				// æ¸…é™¤å®šæ—¶å™¨
				if (this.timeInterval) {
					clearInterval(this.timeInterval);
					this.timeInterval = null;
				}
				if (this.patienceTimer) {
					clearTimeout(this.patienceTimer);
					this.patienceTimer = null;
				}
			},

			resetProgress() {
				this.currentStage = 0;
				this.progressPercentage = 0;
				this.showPatienceTip = false;
				this.elapsedTime = 0;

				// æ¸…é™¤æ‰€æœ‰å®šæ—¶å™¨
				if (this.timeInterval) {
					clearInterval(this.timeInterval);
					this.timeInterval = null;
				}
				if (this.patienceTimer) {
					clearTimeout(this.patienceTimer);
					this.patienceTimer = null;
				}
			},

			formatTime(seconds) {
				if (seconds < 60) {
					return `${seconds}ç§’`;
				} else {
					const minutes = Math.floor(seconds / 60);
					const remainingSeconds = seconds % 60;
					return `${minutes}åˆ†${remainingSeconds}ç§’`;
				}
			},

			// æ£€æŸ¥æˆæƒçŠ¶æ€
			checkAuthStatus() {
				try {
					// é¦–å…ˆæ£€æŸ¥å…¨å±€çŠ¶æ€
					const app = getApp();
					if (app && app.globalData && app.globalData.isAuthorized) {
						const userInfo = app.globalData.userInfo;
						if (userInfo && userInfo.role) {
							console.log('æ£€æµ‹åˆ°å…¨å±€æˆæƒçŠ¶æ€ï¼Œè‡ªåŠ¨è·³è½¬åˆ°:', userInfo.role);
							// ç«‹å³è·³è½¬ï¼Œä¸éœ€è¦å»¶è¿Ÿ
							this.navigateToHome(userInfo.role);
							return;
						}
					}

									// å¦‚æœå…¨å±€çŠ¶æ€ä¸å­˜åœ¨ï¼Œæ£€æŸ¥æœ¬åœ°å­˜å‚¨
				const userInfo = uni.getStorageSync('userInfo');
				if (userInfo && userInfo.isAuthorized && userInfo.phone && userInfo.role) {
					// å·²æˆæƒåˆ™ç›´æ¥è·³è½¬
					console.log('ç”¨æˆ·å·²æˆæƒï¼Œè‡ªåŠ¨è·³è½¬åˆ°:', userInfo.role);
					this.navigateToHome(userInfo.role);
				} else {
					console.log('ç”¨æˆ·æœªæˆæƒï¼Œæ˜¾ç¤ºæˆæƒé¡µé¢');
				}
				} catch (error) {
					console.error('æ£€æŸ¥æˆæƒçŠ¶æ€å¤±è´¥:', error);
					// å‘ç”Ÿé”™è¯¯æ—¶ï¼Œé»˜è®¤æ˜¾ç¤ºæˆæƒé¡µé¢
					console.log('æˆæƒçŠ¶æ€æ£€æŸ¥å¼‚å¸¸ï¼Œæ˜¾ç¤ºæˆæƒé¡µé¢');
				}
			},

			// æŒ‰é’®ç‚¹å‡»å¤„ç†
			onAuthButtonClick() {
				console.log('æŒ‰é’®ç‚¹å‡»ï¼Œåè®®çŠ¶æ€:', this.agreeTerms);

				// å¦‚æœæœªå‹¾é€‰åè®®ï¼Œæ˜¾ç¤ºæç¤ºå’ŒæŠ–åŠ¨
				if (!this.agreeTerms) {
					console.log('æœªå‹¾é€‰åè®®ï¼Œæ˜¾ç¤ºæç¤º');
					this.showAgreementTipAndShake();
					return;
				}

				// å¦‚æœå·²å‹¾é€‰åè®®ï¼Œç‚¹å‡»ä¼šè‡ªåŠ¨è§¦å‘ getPhoneNumber (é€šè¿‡ open-type)
				console.log('åè®®å·²å‹¾é€‰ï¼Œå°†è§¦å‘å¾®ä¿¡æˆæƒ');
			},

			// è·å–æ‰‹æœºå·æˆæƒ
			async onGetPhoneNumber(e) {
				console.log('æˆæƒå›è°ƒ:', e);

				// æ­¤æ—¶åè®®è‚¯å®šå·²å‹¾é€‰ï¼Œç›´æ¥å¤„ç†æˆæƒç»“æœ
				if (e.detail.errMsg === 'getPhoneNumber:fail user deny') {
					uni.showModal({
						title: 'æˆæƒæé†’',
						content: 'ä¸ºäº†æä¾›æ›´å¥½çš„åœè½¦æœåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦è·å–æ‚¨çš„æ‰‹æœºå·è¿›è¡Œèº«ä»½éªŒè¯ã€‚è¯·ç‚¹å‡»"å…è®¸"å®Œæˆæˆæƒã€‚',
						showCancel: true,
						cancelText: 'æš‚ä¸æˆæƒ',
						confirmText: 'é‡æ–°æˆæƒ',
						success: (res) => {
							if (res.confirm) {
								// ç”¨æˆ·é€‰æ‹©é‡æ–°æˆæƒï¼Œå¯ä»¥å¼•å¯¼ç”¨æˆ·å†æ¬¡ç‚¹å‡»æˆæƒæŒ‰é’®
								uni.showToast({
									title: 'è¯·å†æ¬¡ç‚¹å‡»æˆæƒæŒ‰é’®',
									icon: 'none',
									duration: 2000
								});
							}
						}
					});
					return;
				}

				if (e.detail.errMsg !== 'getPhoneNumber:ok') {
					uni.showModal({
						title: 'æˆæƒå¼‚å¸¸',
						content: 'è·å–æ‰‹æœºå·æ—¶å‡ºç°å¼‚å¸¸ï¼Œå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜æˆ–å¾®ä¿¡æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ã€‚è¯·ç¨åé‡è¯•ã€‚',
						showCancel: true,
						cancelText: 'ç¨åé‡è¯•',
						confirmText: 'ç«‹å³é‡è¯•'
					});
					return;
				}

				this.loading = true;
				this.showLoading = true;

				// å¯åŠ¨è¿›åº¦è¿½è¸ª
				this.startProgressTracking();

				try {
					// è·å–åŠ å¯†æ•°æ®ï¼ˆå¼€å‘é˜¶æ®µä¸å®é™…ä½¿ç”¨ï¼‰
					const {
						encryptedData,
						iv
					} = e.detail;

					// ç¬¬ä¸€æ­¥ï¼šè·å–ç™»å½•å‡­è¯
					this.updateStage(1, 20, 'æ­£åœ¨è·å–å¾®ä¿¡ç™»å½•å‡­è¯...');
					const loginRes = await this.wxLogin();

					// ç¬¬äºŒæ­¥ï¼šéªŒè¯èº«ä»½è§’è‰²ï¼ˆæœ€è€—æ—¶çš„é˜¶æ®µï¼‰
					this.updateStage(2, 30, 'æ­£åœ¨éªŒè¯æ‚¨çš„èº«ä»½...\nğŸ” æŸ¥è¯¢å¤–éƒ¨æœåŠ¡ä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…');

					// æ·»åŠ å‹å¥½çš„è¿›åº¦æç¤º
					uni.showToast({
						title: 'æ­£åœ¨æŸ¥è¯¢æœˆç¥¨ä¿¡æ¯',
						icon: 'loading',
						duration: 3000,
						mask: false
					});

					// èº«ä»½éªŒè¯è¿‡ç¨‹ä¸­é€æ­¥æ›´æ–°è¿›åº¦
					const verificationStartTime = Date.now();

					// åŠ¨æ€è¿›åº¦æ›´æ–°ï¼Œæ ¹æ®å®é™…è€—æ—¶è°ƒæ•´
					const progressUpdateInterval = setInterval(() => {
						const elapsed = (Date.now() - verificationStartTime) / 1000;
						if (elapsed < 10) {
							this.updateStage(2, 35, 'ğŸ” æ­£åœ¨è¿æ¥ç³»ç»Ÿ...');
						} else if (elapsed < 20) {
							this.updateStage(2, 45, 'ğŸ“Š æ­£åœ¨æŸ¥è¯¢æ‚¨çš„æœˆç¥¨ä¿¡æ¯...');
						} else if (elapsed < 30) {
							this.updateStage(2, 55, 'ğŸ¯ æ­£åœ¨åŒ¹é…ç”¨æˆ·èº«ä»½å’Œæƒé™...');
						} else if (elapsed < 45) {
							this.updateStage(2, 65, 'â³ å¤–éƒ¨æŸ¥è¯¢æ­£åœ¨è¿›è¡Œï¼Œè¯·ç¨ç­‰...');
						} else if (elapsed < 60) {
							this.updateStage(2, 70, 'ğŸ”„ æŸ¥è¯¢æ•°æ®é‡è¾ƒå¤§ï¼Œæ­£åœ¨å¤„ç†...');
						} else {
							this.updateStage(2, 75, 'âŒ› ç³»ç»Ÿæ­£åœ¨åŠªåŠ›æŸ¥è¯¢ä¸­ï¼Œé©¬ä¸Šå®Œæˆ...');
						}
					}, 5000); // æ¯5ç§’æ›´æ–°ä¸€æ¬¡

					// å¼€å§‹èº«ä»½éªŒè¯
					const phoneResult = await this.decryptPhone({
						code: loginRes.code,
						encryptedData,
						iv,
						parkName: '' // ä¸è®¾ç½®é»˜è®¤åœè½¦åœº
					});

					// æ¸…é™¤è¿›åº¦æ›´æ–°å®šæ—¶å™¨
					clearInterval(progressUpdateInterval);

					const verificationDuration = Math.round((Date.now() - verificationStartTime) / 1000);

					// ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®ç”¨æˆ·ä¿¡æ¯
					this.updateStage(3, 85, `âœ… èº«ä»½éªŒè¯å®Œæˆ(${verificationDuration}ç§’)\næ­£åœ¨ä¸ºæ‚¨è®¾ç½®ç”¨æˆ·ä¿¡æ¯...`);

					// å¦‚æœæ˜¯æœªæ³¨å†Œç”¨æˆ·ï¼Œè‡ªåŠ¨è½¬ä¸ºè®¿å®¢
					if (phoneResult.role === 'unregistered' || !phoneResult.role) {
						console.log('ğŸ“ æœªæ³¨å†Œç”¨æˆ·ï¼Œè‡ªåŠ¨è®¾ç½®ä¸ºè®¿å®¢è§’è‰²');
						
						// ğŸ” éªŒè¯è®¿å®¢æ˜¯å¦é€šè¿‡äºŒç»´ç æ‰«æè¿›å…¥
						const scannedAddressInfo = uni.getStorageSync('scannedAddressInfo') || {};
						const community = scannedAddressInfo.community;
						const source = scannedAddressInfo.source;
						
						// è®¿å®¢å¿…é¡»é€šè¿‡äºŒç»´ç æ‰«æè¿›å…¥
						if (!community || community.trim() === '' || community === '-åœè½¦åœº' || source !== 'qr_scan') {
							console.warn('âŒ [è®¿å®¢éªŒè¯] è®¿å®¢æœªé€šè¿‡äºŒç»´ç æ‰«æè¿›å…¥');
							
							// é‡ç½®è¿›åº¦
							this.completeProgress();
							this.showLoading = false;
							this.loading = false;
							
							uni.showModal({
								title: 'è®¿é—®å—é™',
								content: 'è®¿å®¢ç”¨æˆ·éœ€è¦é€šè¿‡æ‰«æè½¦åœºäºŒç»´ç æ‰èƒ½ä½¿ç”¨åœè½¦æœåŠ¡ã€‚\n\nè¯·è”ç³»ç®¡å®¶è·å–ä¸“ç”¨äºŒç»´ç åé‡æ–°æ‰«ç ç™»å½•ã€‚',
								showCancel: false,
								confirmText: 'æˆ‘çŸ¥é“äº†'
							});
							return;
						}
						
						console.log('âœ… [è®¿å®¢éªŒè¯] è®¿å®¢é€šè¿‡äºŒç»´ç æ‰«æè¿›å…¥ï¼Œè½¦åœº:', community);
						
						phoneResult.role = 'visitor';
						phoneResult.roleText = 'è®¿å®¢';
						phoneResult.userInfo = {
							id: Date.now(),
							openid: 'visitor_' + phoneResult.phone,
							nickname: 'è®¿å®¢ç”¨æˆ·',
							phone: phoneResult.phone,
							auditstatus: 'å·²é€šè¿‡',
							userkind: 'visitor'
						};
						phoneResult.permissions = ['appointment.create', 'appointment.query.own', 'visitor.appointment', 'visitor.query'];
					}
					
					// ä¿å­˜ç”¨æˆ·ä¿¡æ¯
					const loginResult = await this.saveUserInfo(phoneResult);

					// ç¬¬å››æ­¥ï¼šå®Œæˆè®¾ç½®
					this.updateStage(4, 95, `ğŸ‰ æ¬¢è¿æ‚¨ï¼Œ${phoneResult.roleText}ï¼\næ­£åœ¨è¿›å…¥åœè½¦æœåŠ¡...`);

					// æ˜¾ç¤ºè§’è‰²ç›¸å…³çš„æˆåŠŸæç¤º
					const successMessages = {
						owner: 'ğŸ  ä¸šä¸»èº«ä»½éªŒè¯æˆåŠŸï¼',
						manager: 'ğŸ‘¨â€ğŸ’¼ ç®¡å®¶èº«ä»½éªŒè¯æˆåŠŸï¼',
						visitor: 'ğŸš— è®¿å®¢èº«ä»½éªŒè¯æˆåŠŸï¼'
					};

					const successMessage = successMessages[phoneResult.role] || 'âœ… èº«ä»½éªŒè¯æˆåŠŸï¼';

					uni.showToast({
						title: successMessage,
						icon: 'success',
						duration: 2000
					});

					// å»¶è¿Ÿä¸€ä¸‹è®©ç”¨æˆ·çœ‹åˆ°æˆåŠŸçŠ¶æ€ï¼ŒåŒæ—¶æ˜¾ç¤ºè§’è‰²æƒé™æç¤º
					setTimeout(() => {
						const roleDescriptions = {
							owner: 'æ‚¨å¯ä»¥é¢„çº¦åœè½¦ä½ã€æŸ¥çœ‹ä¸ªäººè¿è§„è®°å½•',
							manager: 'æ‚¨å¯ä»¥ç®¡ç†é¢„çº¦ã€å®¡æ ¸ç”³è¯·ã€æŸ¥çœ‹æ‰€æœ‰è®°å½•',
							visitor: 'æ‚¨å¯ä»¥ç”³è¯·è®¿å®¢é¢„çº¦ã€æŸ¥çœ‹ä¸ªäººè®°å½•'
						};

						const roleDesc = roleDescriptions[phoneResult.role] || 'æ¬¢è¿ä½¿ç”¨åœè½¦æœåŠ¡';

						// æœ€ç»ˆå®Œæˆè¿›åº¦
						this.completeProgress();

						uni.showToast({
							title: roleDesc,
							icon: 'none',
							duration: 2500,
							mask: false
						});

						// å†å»¶è¿Ÿä¸€ä¸‹è·³è½¬
						setTimeout(() => {
							this.navigateToHome(phoneResult.role);
						}, 1000);
					}, 1500);

				} catch (error) {
					console.error('ğŸš¨ æˆæƒå¤±è´¥:', error);

					// é‡ç½®è¿›åº¦è¿½è¸ª
					this.resetProgress();

					// éšè—åŠ è½½çŠ¶æ€
					this.showLoading = false;
					this.loading = false;

					// å¤„ç†æˆæƒé”™è¯¯ï¼Œæä¾›å‹å¥½çš„ç”¨æˆ·åé¦ˆ
					this.handleAuthError(error);

				} finally {
					// ç¡®ä¿åŠ è½½çŠ¶æ€è¢«æ¸…é™¤
					this.loading = false;

					// å»¶è¿Ÿéšè—åŠ è½½æ¡†ï¼Œè®©ç”¨æˆ·çœ‹åˆ°æœ€ç»ˆçŠ¶æ€
					setTimeout(() => {
						this.showLoading = false;
						// ç¡®ä¿è¿›åº¦è¢«é‡ç½®
						this.resetProgress();
					}, 1000);
				}
			},

			// å¾®ä¿¡ç™»å½•
			wxLogin() {
				return new Promise((resolve, reject) => {
					uni.login({
						provider: 'weixin',
						success: (res) => {
							if (res.code) {
								resolve(res);
							} else {
								reject(new Error('ç™»å½•å¤±è´¥'));
							}
						},
						fail: reject
					});
				});
			},

			// è°ƒç”¨åç«¯æ¥å£è¿›è¡Œæˆæƒ
			async decryptPhone({
				code,
				encryptedData,
				iv
			}) {;

				try {
					// è°ƒç”¨åç«¯æˆæƒæ¥å£ï¼ˆä¼ é€’åœè½¦åœºä¿¡æ¯ï¼‰
					const authResult = await this.callAuthAPI({
						code,
						encryptedData,
						iv,
						parkName: '' // ä¸è®¾ç½®é»˜è®¤åœè½¦åœº
					});
					if (authResult.code === "0") {
						// æ˜ç¡®è·å– data éƒ¨åˆ†
						const actualData = authResult.data.data;
						// æ‰“å°æ‰€æœ‰å­—æ®µ
						console.log('ğŸ“Š å®é™…æ•°æ®ç»“æ„åˆ†æ:');
						if (actualData && typeof actualData === 'object') {
							for (const key in actualData) {
								console.log(`  - ${key}: ${actualData[key]} (${typeof actualData[key]})`);
							}
						}

						// éªŒè¯è¿”å›çš„æ•°æ®ç»“æ„
						if (!actualData) {
							console.error('âŒ åç«¯è¿”å›çš„dataä¸ºç©º');
							throw new Error('æœåŠ¡å™¨è¿”å›çš„æ•°æ®ä¸ºç©º');
						}

						// æ£€æŸ¥è§’è‰²æ˜¯å¦å­˜åœ¨ä¸”æœ‰æ•ˆ
						if (!actualData.role || actualData.role.trim() === '') {
							console.error('âŒ è§’è‰²ä¿¡æ¯æ— æ•ˆ:', authResult.data.role);
							console.error('ğŸ“Š å®Œæ•´è¿”å›æ•°æ®:', authResult);
							console.error('ğŸ“Š dataéƒ¨åˆ†:', actualData);
							uni.showModal({
								title: 'æˆæƒå¼‚å¸¸',
								content: `æœåŠ¡å™¨è¿”å›çš„è§’è‰²ä¿¡æ¯æ— æ•ˆï¼Œè¯·é‡è¯•æˆ–è”ç³»ç®¡ç†å‘˜`,
								showCancel: false
							});
							throw new Error('è§’è‰²ä¿¡æ¯æ— æ•ˆ');
						}

						console.log('âœ… è§’è‰²éªŒè¯é€šè¿‡:', actualData.role, '-', actualData.roleText);

						return {
							phone: actualData.phone,
							role: actualData.role,
							roleText: actualData.roleText,
							userInfo: actualData.userInfo,
							permissions: actualData.permissions || []
						};
					} else {
						throw new Error(authResult.msg || 'æˆæƒå¤±è´¥');
					}
				} catch (error) {
					console.error('âŒ åç«¯æˆæƒå¤±è´¥:', error);

					// æ ¹æ®é”™è¯¯ç±»å‹æä¾›å‹å¥½çš„å¤„ç†æ–¹æ¡ˆ
					if (error.message.includes('ç½‘ç»œ') || error.message.includes('timeout')) {
						// ç½‘ç»œç›¸å…³é”™è¯¯ï¼Œä¸å†æä¾›æµ‹è¯•æ¨¡å¼é€‰é¡¹
						uni.showModal({
							title: 'ç½‘ç»œè¿æ¥è¶…æ—¶',
							content: 'èº«ä»½éªŒè¯éœ€è¦è¿æ¥å¤–éƒ¨æœˆç¥¨ç³»ç»Ÿï¼Œå½“å‰ç½‘ç»œè¿æ¥è¾ƒæ…¢æˆ–ä¸ç¨³å®šã€‚\n\nè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥ï¼š\nâ€¢ ç¡®ä¿WiFiæˆ–ç§»åŠ¨æ•°æ®å·²å¼€å¯\nâ€¢ å°è¯•åˆ‡æ¢åˆ°æ›´ç¨³å®šçš„ç½‘ç»œ\nâ€¢ ç§»åŠ¨åˆ°ä¿¡å·è¾ƒå¥½çš„ä½ç½®\n\næ£€æŸ¥å®Œæˆåï¼Œè¯·é‡æ–°ç‚¹å‡»æˆæƒæŒ‰é’®ã€‚',
							showCancel: true,
							cancelText: 'ç¨åé‡è¯•',
							confirmText: 'é‡æ–°æ£€æµ‹',
							success: (res) => {
								if (res.confirm) {
									// ç”¨æˆ·é€‰æ‹©é‡æ–°æ£€æµ‹
									uni.showToast({
										title: 'è¯·é‡æ–°ç‚¹å‡»æˆæƒæŒ‰é’®',
										icon: 'none',
										duration: 2500
									});
								}
							}
						});
						throw error;
					} else if (error.message.includes('æœåŠ¡å™¨é”™è¯¯')) {
						// æœåŠ¡å™¨é”™è¯¯
						uni.showModal({
							title: 'æœåŠ¡æš‚æ—¶ä¸å¯ç”¨',
							content: 'åœè½¦æœåŠ¡ç³»ç»Ÿæ­£åœ¨ç»´æŠ¤æˆ–é‡åˆ°ä¸´æ—¶é—®é¢˜ã€‚\n\nå»ºè®®ï¼š\nâ€¢ ç¨åå†è¯•\nâ€¢ è”ç³»åœè½¦åœºç®¡ç†å‘˜\nâ€¢ æˆ–é‡å¯å°ç¨‹åºåé‡è¯•',
							showCancel: true,
							cancelText: 'ç¨åå†è¯•',
							confirmText: 'è”ç³»ç®¡ç†å‘˜',
							success: (res) => {
								if (res.confirm) {
									// æ˜¾ç¤ºè”ç³»æ–¹å¼ï¼ˆå¯ä»¥æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼‰
									uni.showModal({
										title: 'è”ç³»ç®¡ç†å‘˜',
										content: 'å¦‚éœ€å¸®åŠ©ï¼Œè¯·è”ç³»ï¼š\n\nåœè½¦åœºç®¡ç†å‘˜\nç”µè¯ï¼šè¯·å’¨è¯¢ç°åœºå·¥ä½œäººå‘˜',
										showCancel: false,
										confirmText: 'å¥½çš„'
									});
								}
							}
						});
						throw error;
					} else if (error.message.includes('è§’è‰²ä¿¡æ¯æ— æ•ˆ')) {
						// æ•°æ®å¼‚å¸¸
						uni.showModal({
							title: 'æ•°æ®å¼‚å¸¸',
							content: 'ç³»ç»Ÿè¿”å›çš„èº«ä»½ä¿¡æ¯å¼‚å¸¸ï¼Œå¯èƒ½æ˜¯ï¼š\n\nâ€¢ æ‚¨çš„è´¦æˆ·ä¿¡æ¯éœ€è¦æ›´æ–°\nâ€¢ ç³»ç»Ÿæ•°æ®åŒæ­¥å»¶è¿Ÿ\nâ€¢ æœåŠ¡é…ç½®é—®é¢˜\n\nå»ºè®®è”ç³»ç®¡ç†å‘˜å¤„ç†ã€‚',
							showCancel: true,
							cancelText: 'ç¨åé‡è¯•',
							confirmText: 'è”ç³»ç®¡ç†å‘˜'
						});
						throw error;
					} else {
						// å…¶ä»–æœªçŸ¥é”™è¯¯
						uni.showModal({
							title: 'æˆæƒé‡åˆ°é—®é¢˜',
							content: `æŠ±æ­‰ï¼Œæˆæƒè¿‡ç¨‹ä¸­é‡åˆ°äº†é—®é¢˜ï¼š\n\n${error.message}\n\næ‚¨å¯ä»¥ï¼š\nâ€¢ é‡æ–°å°è¯•æˆæƒ\nâ€¢ é‡å¯å°ç¨‹åºåå†è¯•\nâ€¢ è”ç³»æŠ€æœ¯æ”¯æŒ`,
							showCancel: true,
							cancelText: 'é‡æ–°å°è¯•',
							confirmText: 'æŠ€æœ¯æ”¯æŒ',
							success: (res) => {
								if (res.confirm) {
									uni.showModal({
										title: 'æŠ€æœ¯æ”¯æŒ',
										content: 'å¦‚æœé—®é¢˜æŒç»­å­˜åœ¨ï¼Œè¯·ï¼š\n\n1. æˆªå›¾ä¿å­˜é”™è¯¯ä¿¡æ¯\n2. è®°å½•æ“ä½œæ­¥éª¤\n3. è”ç³»æŠ€æœ¯æ”¯æŒäººå‘˜\n\næˆ‘ä»¬ä¼šå°½å¿«ä¸ºæ‚¨è§£å†³é—®é¢˜ã€‚',
										showCancel: false,
										confirmText: 'çŸ¥é“äº†'
									});
								}
							}
						});
						throw error;
					}
				}
			},

			// è°ƒç”¨åç«¯æˆæƒAPI
			async callAuthAPI(params) {
				try {
					// å¯¼å…¥APIé…ç½® - ä½¿ç”¨requireæ›¿ä»£åŠ¨æ€import
					const apiConfig = require('@/config/api.js');
					const wechatAPI = apiConfig.wechatAPI || apiConfig.default?.wechatAPI;

					if (!wechatAPI) {
						throw new Error('APIé…ç½®åŠ è½½å¤±è´¥');
					}

					console.log('ğŸš€ è°ƒç”¨åç«¯æˆæƒæ¥å£:', {
						url: '/parking/wechat/phoneAuth',
						params: {
							code: params.code,
							encryptedData: params.encryptedData ? 'å·²æä¾›' : 'æœªæä¾›',
							iv: params.iv ? 'å·²æä¾›' : 'æœªæä¾›',
							parkName: params.parkName || ''
						}
					});

					return await wechatAPI.phoneAuth(params);
				} catch (error) {
					console.error('âŒ APIè°ƒç”¨å¤±è´¥:', error);

					// æ ¹æ®é”™è¯¯ç±»å‹æŠ›å‡ºä¸åŒçš„é”™è¯¯ä¿¡æ¯
					if (error.originalError) {
						// ç½‘ç»œé”™è¯¯
						throw new Error('ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');
					} else if (error.statusCode) {
						// HTTPé”™è¯¯
						throw new Error(`æœåŠ¡å™¨é”™è¯¯ (${error.statusCode}): ${error.message}`);
					} else {
						// å…¶ä»–é”™è¯¯
						throw new Error(error.message || 'æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨');
					}
				}
			},



			// ä¿å­˜ç”¨æˆ·ä¿¡æ¯
			async saveUserInfo(userInfo) {
				// å‡†å¤‡è®¤è¯æ•°æ®ï¼Œæ·»åŠ æƒé™ä¿¡æ¯
				const authData = {
					phone: userInfo.phone,
					role: userInfo.role,
					roleText: userInfo.roleText,
					message: userInfo.message,
					userInfo: userInfo.userInfo,
					permissions: userInfo.permissions
				};

				// ä½¿ç”¨AuthUtilsè¿›è¡Œç™»å½•
				const loginResult = await AuthUtils.login(authData);

				// æ£€æŸ¥ç™»å½•æ˜¯å¦æˆåŠŸ
				if (!loginResult.success) {
					throw new Error(loginResult.message || 'ç™»å½•å¤±è´¥');
				}

				console.log('âœ… ç”¨æˆ·ä¿¡æ¯ä¿å­˜æˆåŠŸï¼Œè§’è‰²:', authData.role);

				// ä¿å­˜åˆ°Vuexï¼ˆå¦‚æœä½¿ç”¨Vuexï¼‰
				if (this.$store) {
					this.$store.commit('$tStore', {
						name: 'vuex_user',
						value: loginResult.data
					});
				}

				return loginResult;
			},

			// æ ¹æ®è§’è‰²è·³è½¬åˆ°é¦–é¡µ
			async navigateToHome(role) {
				try {
					// ç¡®ä¿TabBarå·²ç»è®¾ç½®å®Œæˆ
					await DynamicTabBarManager.setTabBarByRole(role);

					// å®šä¹‰è§’è‰²å¯¹åº”çš„é¦–é¡µ
					const homePages = {
						manager: '/pagesA/reservation/searchResult/searchResult', // ç®¡å®¶é»˜è®¤è¿›å…¥é¢„çº¦æŸ¥è¯¢
						owner: '/pagesA/reservation/form', // ä¸šä¸»é»˜è®¤è¿›å…¥é¢„çº¦é¡µé¢
						visitor: '/pagesA/reservation/form' // è®¿å®¢é»˜è®¤è¿›å…¥é¢„çº¦é¡µé¢
					};

					const homePage = homePages[role] || '/pagesA/reservation/form';

					console.log(`ğŸš€ ç”¨æˆ·è§’è‰²: ${role}, TabBarå·²è®¾ç½®ï¼Œè·³è½¬åˆ°: ${homePage}`);

					uni.reLaunch({
						url: homePage,
						success: () => {
							console.log('âœ… é¡µé¢è·³è½¬æˆåŠŸ');

							// æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
							setTimeout(() => {
								// ğŸ” æ£€æŸ¥è®¿å®¢æ˜¯å¦éœ€è¦æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
								if (role === 'visitor') {
									// è®¿å®¢éœ€è¦éªŒè¯æ˜¯å¦é€šè¿‡äºŒç»´ç æ‰«æè¿›å…¥
									const scannedAddressInfo = uni.getStorageSync('scannedAddressInfo') || {};
									const community = scannedAddressInfo.community;
									const source = scannedAddressInfo.source;
									
									// åªæœ‰é€šè¿‡äºŒç»´ç æ‰«æä¸”æœ‰è½¦åœºä¿¡æ¯çš„è®¿å®¢æ‰æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
									if (community && community.trim() !== '' && community !== '-åœè½¦åœº' && source === 'qr_scan') {
										console.log('âœ… è®¿å®¢é€šè¿‡äºŒç»´ç æ‰«æè¿›å…¥ï¼Œæ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯');
										uni.showToast({
											title: 'ğŸš— æ¬¢è¿è®¿å®¢ï¼',
											icon: 'success',
											duration: 1500
										});
									} else {
										console.log('âš ï¸ è®¿å®¢æœªé€šè¿‡äºŒç»´ç æ‰«æï¼Œä¸æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯');
										// ä¸æ˜¾ç¤ºä»»ä½•æç¤º
									}
								} else {
									// ä¸šä¸»å’Œç®¡å®¶æ­£å¸¸æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
									const welcomeMessages = {
										manager: 'ğŸ‰ æ¬¢è¿ç®¡å®¶ï¼',
										owner: 'ğŸ  æ¬¢è¿ä¸šä¸»ï¼'
									};
									const welcomeMessage = welcomeMessages[role] || 'ğŸ‰ æ¬¢è¿æ‚¨ï¼';
									uni.showToast({
										title: welcomeMessage,
										icon: 'success',
										duration: 1500
									});
								}
							}, 500);
						},
						fail: (err) => {
							console.error('âŒ é¡µé¢è·³è½¬å¤±è´¥:', err);
							// å¦‚æœè·³è½¬å¤±è´¥ï¼Œå°è¯•è·³è½¬åˆ°é¦–é¡µ
							uni.reLaunch({
								url: '/pagesA/reservation/form'
							});
						}
					});

				} catch (error) {
					console.error('âŒ TabBarè®¾ç½®å¤±è´¥:', error);

					// å³ä½¿TabBarè®¾ç½®å¤±è´¥ï¼Œä¹Ÿè¦è·³è½¬
					const defaultPages = {
						manager: '/pagesA/reservation/searchResult/searchResult',
						owner: '/pagesA/reservation/form',
						visitor: '/pagesA/reservation/form'
					};
					const defaultPage = defaultPages[role] || '/pagesA/reservation/form';

					uni.reLaunch({
						url: defaultPage
					});
				}
			},

			// ç»§ç»­è®¿å®¢ç™»å½•æµç¨‹
			async continueLogin(visitorResult) {
				try {
					// ğŸ” è®¿å®¢æ‰«ç éªŒè¯
					if (visitorResult.role === 'visitor') {
						const scannedAddressInfo = uni.getStorageSync('scannedAddressInfo') || {};
						const community = scannedAddressInfo.community;
						const source = scannedAddressInfo.source;
						
						// è®¿å®¢å¿…é¡»é€šè¿‡äºŒç»´ç æ‰«æè¿›å…¥
						if (!community || community.trim() === '' || community === '-åœè½¦åœº' || source !== 'qr_scan') {
							console.warn('âŒ [è®¿å®¢éªŒè¯] è®¿å®¢æœªé€šè¿‡äºŒç»´ç æ‰«æè¿›å…¥');
							
							// é‡ç½®è¿›åº¦
							this.resetProgress();
							this.showLoading = false;
							this.loading = false;
							
							uni.showModal({
								title: 'è®¿é—®å—é™',
								content: 'è®¿å®¢ç”¨æˆ·éœ€è¦é€šè¿‡æ‰«æè½¦åœºäºŒç»´ç æ‰èƒ½è¿›è¡Œé¢„çº¦ã€‚\n\nè¯·è”ç³»ç®¡å®¶è·å–ä¸“ç”¨é¢„çº¦äºŒç»´ç ã€‚',
								showCancel: false,
								confirmText: 'æˆ‘çŸ¥é“äº†'
							});
							return;
						}
						
						console.log('âœ… [è®¿å®¢éªŒè¯] è®¿å®¢é€šè¿‡äºŒç»´ç æ‰«æè¿›å…¥ï¼Œè½¦åœº:', community);
					}
					
					// ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®ç”¨æˆ·ä¿¡æ¯
					this.updateStage(3, 85, `âœ… èº«ä»½ç¡®è®¤å®Œæˆ\næ­£åœ¨ä¸ºæ‚¨è®¾ç½®ç”¨æˆ·ä¿¡æ¯...`);

					// ä¿å­˜ç”¨æˆ·ä¿¡æ¯
					const loginResult = await this.saveUserInfo(visitorResult);

					// ç¬¬å››æ­¥ï¼šå®Œæˆè®¾ç½®
					this.updateStage(4, 95, `ğŸ‰ æ¬¢è¿æ‚¨ï¼Œ${visitorResult.roleText}ï¼\næ­£åœ¨è¿›å…¥åœè½¦æœåŠ¡...`);

					// å»¶è¿Ÿä¸€ä¸‹è®©ç”¨æˆ·çœ‹åˆ°æˆåŠŸçŠ¶æ€
					setTimeout(() => {
						// æœ€ç»ˆå®Œæˆè¿›åº¦
						this.completeProgress();

						// å†å»¶è¿Ÿä¸€ä¸‹è·³è½¬
						setTimeout(() => {
							this.navigateToHome(visitorResult.role);
						}, 500);
					}, 1000);

				} catch (error) {
					console.error('ğŸš¨ ç™»å½•å¤±è´¥:', error);

					// é‡ç½®è¿›åº¦è¿½è¸ª
					this.resetProgress();

					// éšè—åŠ è½½çŠ¶æ€
					this.showLoading = false;
					this.loading = false;

					// å¤„ç†ç™»å½•é”™è¯¯
					this.handleAuthError(error);
				}
			},


			// å¤„ç†æˆæƒé”™è¯¯
			handleAuthError(error) {
				console.error('ğŸš¨ æˆæƒé”™è¯¯è¯¦æƒ…:', error);

				if (error.message && error.message.includes('ç”¨æˆ·å–æ¶ˆé€‰æ‹©')) {
					// ç”¨æˆ·å–æ¶ˆäº†è§’è‰²é€‰æ‹©ï¼Œä¸æ˜¾ç¤ºé”™è¯¯
					return;
				}

				// èŠ±ç”Ÿå£³å…è´¹ç‰ˆé™åˆ¶å¤„ç†
				if (error.isHuashengkeError || (error.message && error.message.includes('èŠ±ç”Ÿå£³'))) {
					// æ£€æŸ¥æ˜¯å¦æ˜¯æ­£åœ¨è‡ªåŠ¨é‡è¯•çš„æƒ…å†µ
					if (error.message && error.message.includes('æ­£åœ¨è‡ªåŠ¨å¤„ç†')) {
						// æ˜¾ç¤ºå‹å¥½çš„ç­‰å¾…æç¤º
						uni.showToast({
							title: 'ğŸ•’ èŠ±ç”Ÿå£³ç­‰å¾…ä¸­ï¼Œè¯·ç¨å€™...',
							icon: 'loading',
							duration: 3000,
							mask: true
						});
						
						// æ›´æ–°åŠ è½½æ–‡æœ¬
						this.loadingText = 'ğŸŒ æ£€æµ‹åˆ°å†…ç½‘ç©¿é€ä¸­é—´é¡µ\nâ³ æ­£åœ¨è‡ªåŠ¨ç­‰å¾…è·³è½¬...\n(çº¦éœ€10-15ç§’)';
						
						return; // ä¸æ˜¾ç¤ºé”™è¯¯å¼¹çª—ï¼Œè®©è‡ªåŠ¨é‡è¯•ç»§ç»­
					}
					
					// å¦‚æœæ˜¯é‡è¯•å¤±è´¥çš„æƒ…å†µ
					if (error.statusCode === 'TUNNEL_RETRY_FAILED') {
						uni.showModal({
							title: 'è®¿é—®å¼‚å¸¸',
							content: 'èŠ±ç”Ÿå£³è‡ªåŠ¨è·³è½¬å¤±è´¥ï¼Œå¯èƒ½çš„åŸå› ï¼š\n\nâ€¢ ç½‘ç»œè¿æ¥ä¸ç¨³å®š\nâ€¢ èŠ±ç”Ÿå£³æœåŠ¡å¼‚å¸¸\nâ€¢ åç«¯æœåŠ¡æœªå¯åŠ¨\n\nå»ºè®®ï¼š\nâ€¢ é‡æ–°å°è¯•æˆæƒ\nâ€¢ æ£€æŸ¥ç½‘ç»œè¿æ¥\nâ€¢ è”ç³»æŠ€æœ¯æ”¯æŒ',
							showCancel: true,
							cancelText: 'é‡æ–°å°è¯•',
							confirmText: 'è”ç³»æ”¯æŒ',
							success: (res) => {
								if (res.confirm) {
									this.showHelpInfo();
								} else {
									// é‡æ–°å°è¯•
									uni.showToast({
										title: 'è¯·é‡æ–°ç‚¹å‡»æˆæƒæŒ‰é’®',
										icon: 'none',
										duration: 2000
									});
								}
							}
						});
						return;
					}
					
					// å…¶ä»–èŠ±ç”Ÿå£³ç›¸å…³é”™è¯¯
					uni.showModal({
						title: 'å†…ç½‘ç©¿é€æç¤º',
						content: 'æ£€æµ‹åˆ°èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€æœåŠ¡ã€‚\n\nâœ… ç³»ç»Ÿå·²è‡ªåŠ¨å¤„ç†10ç§’ç­‰å¾…\nâœ… æ”¯æŒå…è´¹ç‰ˆæ— éœ€å‡çº§\n\nå¦‚æœä»æœ‰é—®é¢˜ï¼Œè¯·ï¼š\nâ€¢ æ£€æŸ¥ç½‘ç»œè¿æ¥\nâ€¢ ç¡®è®¤åç«¯æœåŠ¡è¿è¡Œ\nâ€¢ è”ç³»æŠ€æœ¯æ”¯æŒ',
						showCancel: true,
						cancelText: 'é‡æ–°å°è¯•',
						confirmText: 'è·å–å¸®åŠ©',
						success: (res) => {
							if (res.confirm) {
								this.showHelpInfo();
							} else {
								uni.showToast({
									title: 'è¯·é‡æ–°ç‚¹å‡»æˆæƒæŒ‰é’®',
									icon: 'none',
									duration: 2000
								});
							}
						}
					});
					return;
				}

				// æ ¹æ®é”™è¯¯ç±»å‹æä¾›ä¸åŒçš„å¤„ç†æ–¹æ¡ˆ
				if (error.message && error.message.includes('ç½‘ç»œ')) {
					// ç½‘ç»œé”™è¯¯
					uni.showModal({
						title: 'ç½‘ç»œè¿æ¥é—®é¢˜',
						content: 'ç½‘ç»œè¿æ¥ä¸ç¨³å®šï¼Œå½±å“äº†èº«ä»½éªŒè¯è¿‡ç¨‹ã€‚\n\nå»ºè®®è§£å†³æ–¹æ¡ˆï¼š\nâ€¢ æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€\nâ€¢ åˆ‡æ¢åˆ°ç¨³å®šçš„WiFi\nâ€¢ ç§»åŠ¨åˆ°ä¿¡å·è¾ƒå¥½çš„ä½ç½®',
						showCancel: true,
						cancelText: 'ç¨åé‡è¯•',
						confirmText: 'é‡æ–°æ£€æµ‹',
						success: (res) => {
							if (res.confirm) {
								// æ˜¾ç¤ºç½‘ç»œæ£€æµ‹æç¤º
								uni.showLoading({
									title: 'æ£€æµ‹ç½‘ç»œä¸­...',
									mask: true
								});

								// ç®€å•çš„ç½‘ç»œæ£€æµ‹
								setTimeout(() => {
									uni.hideLoading();
									uni.showToast({
										title: 'è¯·é‡æ–°ç‚¹å‡»æˆæƒæŒ‰é’®',
										icon: 'none',
										duration: 2500
									});
								}, 2000);
							}
						}
					});
				} else if (error.message && error.message.includes('timeout')) {
					// è¶…æ—¶é”™è¯¯
					uni.showModal({
						title: 'è¯·æ±‚è¶…æ—¶',
						content: 'èº«ä»½éªŒè¯æœåŠ¡å“åº”è¾ƒæ…¢ï¼Œè¿™å¯èƒ½æ˜¯ç”±äºï¼š\n\nâ€¢ ç½‘ç»œå»¶è¿Ÿè¾ƒé«˜\nâ€¢ æœåŠ¡å™¨è´Ÿè½½è¾ƒé‡\nâ€¢ å¤–éƒ¨éªŒè¯æœåŠ¡ç¹å¿™\n\nè¯·ç¨åé‡è¯•æˆ–è”ç³»ç®¡ç†å‘˜ã€‚',
						showCancel: true,
						cancelText: 'ç¨åé‡è¯•',
						confirmText: 'ç«‹å³é‡è¯•',
						success: (res) => {
							if (res.confirm) {
								// ç”¨æˆ·é€‰æ‹©ç«‹å³é‡è¯•ï¼Œå¯ä»¥è§¦å‘é‡æ–°æˆæƒ
								uni.showToast({
									title: 'è¯·é‡æ–°ç‚¹å‡»æˆæƒæŒ‰é’®',
									icon: 'none',
									duration: 2000
								});
							}
						}
					});
				} else if (error.attempts && error.attempts > 1) {
					// å¤šæ¬¡å°è¯•å¤±è´¥
					uni.showModal({
						title: 'å¤šæ¬¡å°è¯•å¤±è´¥',
						content: `å·²å°è¯• ${error.attempts} æ¬¡ï¼Œä»ç„¶æ— æ³•å®Œæˆæˆæƒã€‚\n\nå¯èƒ½çš„åŸå› ï¼š\nâ€¢ ç½‘ç»œç¯å¢ƒä¸ç¨³å®š\nâ€¢ æœåŠ¡å™¨ç»´æŠ¤ä¸­\nâ€¢ è´¦æˆ·çŠ¶æ€å¼‚å¸¸\n\nå»ºè®®è”ç³»æŠ€æœ¯æ”¯æŒã€‚`,
						showCancel: true,
						cancelText: 'ç¨åå†è¯•',
						confirmText: 'è·å–å¸®åŠ©',
						success: (res) => {
							if (res.confirm) {
								this.showHelpInfo();
							}
						}
					});
				} else {
					// é€šç”¨é”™è¯¯å¤„ç†
					const errorMessage = error.message || 'æœªçŸ¥é”™è¯¯';
					uni.showModal({
						title: 'æˆæƒé‡åˆ°é—®é¢˜',
						content: `å¾ˆæŠ±æ­‰ï¼Œæˆæƒè¿‡ç¨‹ä¸­é‡åˆ°äº†é—®é¢˜ï¼š\n\n${errorMessage}\n\nå»ºè®®æ‚¨ï¼š\nâ€¢ é‡æ–°å°è¯•æˆæƒ\nâ€¢ æ£€æŸ¥ç½‘ç»œè¿æ¥\nâ€¢ é‡å¯å°ç¨‹åº`,
						showCancel: true,
						cancelText: 'é‡æ–°å°è¯•',
						confirmText: 'è·å–å¸®åŠ©',
						success: (res) => {
							if (res.confirm) {
								this.showHelpInfo();
							} else {
								// ç”¨æˆ·é€‰æ‹©é‡æ–°å°è¯•
								uni.showToast({
									title: 'è¯·é‡æ–°ç‚¹å‡»æˆæƒæŒ‰é’®',
									icon: 'none',
									duration: 2000
								});
							}
						}
					});
				}
			},

			// æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
			showHelpInfo() {
				uni.showModal({
					title: 'è·å–å¸®åŠ©',
					content: 'å¦‚æœæŒç»­é‡åˆ°é—®é¢˜ï¼Œæ‚¨å¯ä»¥ï¼š\n\nğŸ”§ æŠ€æœ¯æ”¯æŒ\nâ€¢ é‡å¯å°ç¨‹åºåé‡è¯•\nâ€¢ æ¸…é™¤å°ç¨‹åºç¼“å­˜\nâ€¢ æ›´æ–°å¾®ä¿¡åˆ°æœ€æ–°ç‰ˆæœ¬\n\nğŸ“ è”ç³»æˆ‘ä»¬\nâ€¢ è”ç³»åœè½¦åœºç®¡ç†å‘˜\nâ€¢ åé¦ˆé—®é¢˜ç»™æŠ€æœ¯å›¢é˜Ÿ',
					showCancel: true,
					cancelText: 'è‡ªåŠ©è§£å†³',
					confirmText: 'è”ç³»æ”¯æŒ',
					success: (res) => {
						if (res.confirm) {
							uni.showModal({
								title: 'è”ç³»æ”¯æŒ',
								content: 'è¯·è”ç³»ï¼š\n\nåœè½¦åœºç°åœºç®¡ç†å‘˜\næˆ–æ‰«æåœè½¦åœºå†…çš„å®¢æœäºŒç»´ç \n\næˆ‘ä»¬ä¼šå°½å¿«ä¸ºæ‚¨è§£å†³é—®é¢˜ã€‚',
								showCancel: false,
								confirmText: 'å¥½çš„'
							});
						} else {
							uni.showToast({
								title: 'è¯·å°è¯•é‡å¯å°ç¨‹åº',
								icon: 'none',
								duration: 2500
							});
						}
					}
				});
			},

			// å¼€å‘è°ƒè¯•ï¼šæ¸…é™¤æˆæƒçŠ¶æ€
			clearAuth() {
				uni.showModal({
					title: 'ç¡®è®¤æ¸…é™¤',
					content: 'ç¡®å®šè¦æ¸…é™¤æˆæƒçŠ¶æ€å—ï¼Ÿæ¸…é™¤åéœ€è¦é‡æ–°æˆæƒç™»å½•ã€‚',
					success: (res) => {
						if (res.confirm) {
							// æ¸…é™¤æœ¬åœ°å­˜å‚¨
							uni.removeStorageSync('userInfo');

							// æ¸…é™¤å…¨å±€çŠ¶æ€
							const app = getApp();
							if (app.globalData) {
								app.globalData.isAuthorized = false;
								app.globalData.userInfo = null;
							}

							uni.showToast({
								title: 'æ‰€æœ‰çŠ¶æ€å·²æ¸…é™¤',
								icon: 'success'
							});

							console.log('æˆæƒçŠ¶æ€å’Œç”³è¯·è®°å½•å·²æ¸…é™¤');
						}
					}
				});
			}
		}
	}
</script>

<style lang="scss" scoped>
	.auth-container {
		min-height: 100vh;
		position: relative;
		overflow: hidden;
		background: #f8fafc;
	}

	.bg-gradient {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		height: 50vh;
		background: linear-gradient(135deg, #1677ff 0%, #0958d9 100%);
		z-index: 1;
	}

	.wave-decoration {
		position: absolute;
		top: 45vh;
		left: 0;
		right: 0;
		height: 100rpx;
		z-index: 2;

		.wave {
			position: absolute;
			bottom: 0;
			left: 0;
			width: 100%;
			height: 100rpx;
			background: #f8fafc;

			&.wave-1 {
				border-radius: 0 0 50% 50% / 0 0 100% 100%;
				animation: wave-flow 4s ease-in-out infinite;
			}

			&.wave-2 {
				border-radius: 0 0 40% 60% / 0 0 80% 120%;
				opacity: 0.8;
				animation: wave-flow 6s ease-in-out infinite reverse;
			}
		}
	}

	@keyframes wave-flow {

		0%,
		100% {
			transform: translateX(0) scaleY(1);
		}

		50% {
			transform: translateX(-20rpx) scaleY(1.1);
		}
	}

	.main-content {
		position: relative;
		z-index: 3;
		min-height: 100vh;
		display: flex;
		flex-direction: column;
		padding: 0 60rpx;
	}

	.header-section {
		flex: none;
		padding-top: 150rpx;
		text-align: center;

		.logo-container {
			.logo-bg {
				width: 120rpx;
				height: 120rpx;
				background: rgba(255, 255, 255, 0.25);
				border-radius: 30rpx;
				display: flex;
				align-items: center;
				justify-content: center;
				margin: 0 auto 30rpx;
				backdrop-filter: blur(20px);
				box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.2);
				border: 2rpx solid rgba(255, 255, 255, 0.3);

				.logo-icon {
					font-size: 60rpx;
				}
			}

			.app-title {
				display: block;
				font-size: 52rpx;
				font-weight: 700;
				color: #fff;
				margin-bottom: 12rpx;
				letter-spacing: 2rpx;
				text-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.3);
			}

			.app-subtitle {
				display: block;
				font-size: 28rpx;
				color: #fff;
				font-weight: 400;
				letter-spacing: 1rpx;
				opacity: 0.9;
				text-shadow: 0 1rpx 4rpx rgba(0, 0, 0, 0.2);
			}
		}
	}

	.content-section {
		flex: 1;
		padding-top: 100rpx;

		.welcome-text {
			text-align: center;
			margin-bottom: 60rpx;
			background: rgba(255, 255, 255, 0.95);
			border-radius: 24rpx;
			padding: 40rpx 30rpx 30rpx;
			box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);

			.welcome-title {
				display: block;
				font-size: 42rpx;
				font-weight: 600;
				color: #1a202c;
				margin-bottom: 16rpx;
			}

			.welcome-desc {
				display: block;
				font-size: 28rpx;
				color: #4a5568;
				line-height: 1.6;
				margin-bottom: 24rpx;
			}

			.process-tips {
				background: linear-gradient(135deg, #f7f9fc 0%, #e3f2fd 100%);
				border-radius: 16rpx;
				padding: 24rpx 20rpx;
				margin-top: 24rpx;
				border: 1rpx solid #e8f4f8;
				text-align: left;

				.tips-title {
					display: block;
					font-size: 26rpx;
					font-weight: 600;
					color: #1565c0;
					margin-bottom: 16rpx;
					text-align: center;
				}

				.tips-item {
					display: block;
					font-size: 24rpx;
					color: #455a64;
					margin-bottom: 8rpx;
					padding-left: 12rpx;
					position: relative;
					line-height: 1.5;

					&::before {
						content: 'â€¢';
						position: absolute;
						left: 0;
						color: #1976d2;
						font-weight: bold;
					}
				}

				.tips-note {
					display: block;
					font-size: 22rpx;
					color: #ff7043;
					margin-top: 12rpx;
					text-align: center;
					background: rgba(255, 112, 67, 0.1);
					padding: 8rpx 12rpx;
					border-radius: 8rpx;
					font-weight: 500;
				}
			}
		}

		.highlights-section {
			padding: 0 30rpx;
			max-width: 600rpx;
			margin: 0 auto;

			.highlight-item {
				display: flex;
				align-items: center;
				padding: 24rpx 28rpx;
				margin-bottom: 20rpx;
				background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 250, 252, 0.8) 100%);
				border-radius: 20rpx;
				box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.06);
				border: 1rpx solid rgba(255, 255, 255, 0.8);
				backdrop-filter: blur(10rpx);
				position: relative;
				overflow: hidden;

				&:last-child {
					margin-bottom: 0;
				}

				&::before {
					content: '';
					position: absolute;
					top: 0;
					left: 0;
					width: 100%;
					height: 100%;
					background: linear-gradient(135deg, transparent 0%, rgba(22, 119, 255, 0.02) 100%);
					pointer-events: none;
				}

				.icon-container {
					position: relative;
					margin-right: 32rpx;
					flex-shrink: 0;

					.icon-bg {
						width: 72rpx;
						height: 72rpx;
						border-radius: 50%;
						display: flex;
						align-items: center;
						justify-content: center;
						position: relative;
						z-index: 2;

						&.icon-blue {
							background: linear-gradient(135deg, #1677ff 0%, #69c0ff 100%);
							box-shadow: 0 4rpx 16rpx rgba(22, 119, 255, 0.3);
						}

						&.icon-green {
							background: linear-gradient(135deg, #52c41a 0%, #b7eb8f 100%);
							box-shadow: 0 4rpx 16rpx rgba(82, 196, 26, 0.3);
						}

						&.icon-orange {
							background: linear-gradient(135deg, #fa8c16 0%, #ffd666 100%);
							box-shadow: 0 4rpx 16rpx rgba(250, 140, 22, 0.3);
						}

						.icon {
							font-size: 40rpx;
							filter: brightness(1.1);
						}
					}

					.icon-ring {
						position: absolute;
						top: -6rpx;
						left: -6rpx;
						width: 84rpx;
						height: 84rpx;
						border: 2rpx solid rgba(22, 119, 255, 0.1);
						border-radius: 50%;
						z-index: 1;
						animation: ring-pulse 3s ease-in-out infinite;
					}
				}

				.content {
					flex: 1;
					min-width: 0;

					.title {
						display: block;
						font-size: 30rpx;
						font-weight: 600;
						color: #1a202c;
						margin-bottom: 6rpx;
						line-height: 1.4;
					}

					.desc {
						display: block;
						font-size: 24rpx;
						color: #718096;
						line-height: 1.5;
						font-weight: 400;
					}
				}
			}
		}
	}

	.auth-section {
		flex: none;
		padding-bottom: 80rpx;

		.auth-button {
			width: 100%;
			height: 112rpx;
			background: linear-gradient(135deg, #1677ff 0%, #0958d9 100%);
			border-radius: 56rpx;
			border: none;
			margin-bottom: 40rpx;
			position: relative;
			overflow: hidden;
			box-shadow: 0 8rpx 24rpx rgba(22, 119, 255, 0.4);
			transition: all 0.3s ease;

			&:not(:disabled):active {
				transform: scale(0.98);
			}

			&:disabled {
				opacity: 0.7;
			}

			&::after {
				border: none;
			}

			.button-content {
				display: flex;
				align-items: center;
				justify-content: center;
				height: 100%;
				position: relative;
				z-index: 2;

				.wechat-icon {
					font-size: 40rpx;
					margin-right: 16rpx;
				}

				.button-text {
					font-size: 32rpx;
					font-weight: 600;
					color: #fff;
					letter-spacing: 1rpx;
				}
			}

			.loading-wave {
				position: absolute;
				top: 0;
				left: -100%;
				width: 100%;
				height: 100%;
				background: linear-gradient(90deg,
						transparent,
						rgba(255, 255, 255, 0.3),
						transparent);
				animation: loading-wave 1.5s infinite;
			}
		}

		.privacy-notice {
			text-align: center;
			line-height: 1.6;

			.agreement-section {
				margin-bottom: 16rpx;
				position: relative;
				transition: all 0.3s ease;

				// æç¤ºæ¡†æ ·å¼
				.agreement-tip {
					position: absolute;
					top: -60rpx;
					left: 50%;
					transform: translateX(-50%);
					background: rgba(0, 0, 0, 0.8);
					color: #fff;
					padding: 12rpx 24rpx;
					border-radius: 24rpx;
					z-index: 100;
					animation: tip-fade-in 0.3s ease;

					&::after {
						content: '';
						position: absolute;
						bottom: -8rpx;
						left: 50%;
						transform: translateX(-50%);
						width: 0;
						height: 0;
						border-left: 8rpx solid transparent;
						border-right: 8rpx solid transparent;
						border-top: 8rpx solid rgba(0, 0, 0, 0.8);
					}

					.tip-text {
						font-size: 24rpx;
						color: #fff;
						white-space: nowrap;
					}
				}

				// æŠ–åŠ¨æ•ˆæœ
				&.shaking {
					animation: shake-horizontal 0.6s ease-in-out;
				}

				.agreement-item {
					display: flex;
					align-items: flex-start;
					justify-content: center;
					gap: 12rpx;
					text-align: left;

					// è°ƒæ•´å¤é€‰æ¡†å¤§å°
					checkbox {
						transform: scale(0.8);
						margin-right: 4rpx;
					}

					// é’ˆå¯¹ä¸åŒå¹³å°çš„å¤é€‰æ¡†å¤§å°è°ƒæ•´
					/deep/ .uni-checkbox-input {
						width: 18px !important;
						height: 18px !important;
						margin-right: 8rpx;
					}

					// å¾®ä¿¡å°ç¨‹åºç«¯çš„å¤é€‰æ¡†è°ƒæ•´
					/deep/ .wx-checkbox-input {
						width: 18px !important;
						height: 18px !important;
						transform: scale(0.8);
					}

					// é€šç”¨çš„å¤é€‰æ¡†æ ·å¼è°ƒæ•´
					::v-deep checkbox {
						transform: scale(0.8);
					}

					// H5ç«¯çš„å¤é€‰æ¡†è°ƒæ•´
					::v-deep input[type="checkbox"] {
						width: 18px !important;
						height: 18px !important;
						transform: scale(0.8);
					}

					.agreement-text {
						font-size: 24rpx;
						color: #4a5568;
						line-height: 1.6;

						.notice-text {
							color: #a0aec0;
						}

						.notice-link {
							color: #1677ff;
							font-weight: 600;
							border-bottom: 1rpx solid #1677ff;
							margin: 0 4rpx;
						}
					}
				}
			}

			.privacy-tips {
				background: rgba(255, 255, 255, 0.8);
				border-radius: 12rpx;
				padding: 16rpx 20rpx;
				backdrop-filter: blur(10rpx);
				border: 1rpx solid rgba(255, 255, 255, 0.3);

				.privacy-tip {
					display: block;
					font-size: 20rpx;
					color: #64748b;
					line-height: 1.5;
					margin-bottom: 4rpx;

					&:last-child {
						margin-bottom: 0;
					}
				}
			}
		}
	}

	.fullscreen-loading {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: rgba(0, 0, 0, 0.6);
		backdrop-filter: blur(10px);
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: 9999;

		.loading-card {
			background: #fff;
			border-radius: 32rpx;
			padding: 60rpx 40rpx;
			text-align: center;
			min-width: 450rpx;
			max-width: 600rpx;
			box-shadow: 0 20rpx 60rpx rgba(0, 0, 0, 0.2);

			// è¿›åº¦æ¡æ ·å¼
			.progress-container {
				margin-bottom: 40rpx;

				.progress-bar {
					width: 100%;
					height: 8rpx;
					background: #f0f0f0;
					border-radius: 4rpx;
					overflow: hidden;
					margin-bottom: 12rpx;

					.progress-fill {
						height: 100%;
						background: linear-gradient(90deg, #1890ff 0%, #52c41a 100%);
						border-radius: 4rpx;
						transition: width 0.3s ease;
						animation: progress-shimmer 2s infinite;
					}
				}

				.progress-text {
					font-size: 24rpx;
					color: #1890ff;
					font-weight: 600;
				}
			}

			// é˜¶æ®µæŒ‡ç¤ºå™¨æ ·å¼
			.stage-indicators {
				display: flex;
				align-items: center;
				justify-content: center;
				margin-bottom: 40rpx;

				.stage-item {
					display: flex;
					flex-direction: column;
					align-items: center;

					.stage-icon {
						width: 40rpx;
						height: 40rpx;
						border-radius: 50%;
						background: #f0f0f0;
						color: #999;
						display: flex;
						align-items: center;
						justify-content: center;
						font-size: 22rpx;
						font-weight: 600;
						margin-bottom: 8rpx;
						transition: all 0.3s ease;
					}

					.stage-label {
						font-size: 20rpx;
						color: #999;
						transition: color 0.3s ease;
					}

					&.active {
						.stage-icon {
							background: #1890ff;
							color: #fff;
							animation: stage-pulse 2s infinite;
						}

						.stage-label {
							color: #1890ff;
						}
					}

					&.completed {
						.stage-icon {
							background: #52c41a;
							color: #fff;
							animation: none;
						}

						.stage-label {
							color: #52c41a;
						}
					}
				}

				.stage-connector {
					width: 60rpx;
					height: 2rpx;
					background: #f0f0f0;
					margin: 0 20rpx;
					transition: background 0.3s ease;

					&.active {
						background: #1890ff;
					}
				}
			}

			// åŠ¨æ€loadingåŠ¨ç”»
			.loading-animation {
				margin-bottom: 30rpx;

				.searching-icon {
					position: relative;
					width: 80rpx;
					height: 80rpx;
					margin: 0 auto;

					.radar-circle {
						position: absolute;
						top: 50%;
						left: 50%;
						transform: translate(-50%, -50%);
						border: 2rpx solid #1890ff;
						border-radius: 50%;
						opacity: 0;
						animation: radar-pulse 2s infinite;

						&:nth-child(1) {
							width: 20rpx;
							height: 20rpx;
							animation-delay: 0s;
						}

						&:nth-child(2) {
							width: 40rpx;
							height: 40rpx;
							animation-delay: 0.7s;
						}

						&:nth-child(3) {
							width: 60rpx;
							height: 60rpx;
							animation-delay: 1.4s;
						}
					}

					.search-text {
						position: absolute;
						top: 50%;
						left: 50%;
						transform: translate(-50%, -50%);
						font-size: 32rpx;
						z-index: 10;
					}
				}

				.loading-dots {
					display: flex;
					justify-content: center;
					gap: 12rpx;

					.dot {
						width: 16rpx;
						height: 16rpx;
						background: #1890ff;
						border-radius: 50%;
						animation: dot-bounce 1.4s infinite ease-in-out both;

						&.dot-1 {
							animation-delay: -0.32s;
						}

						&.dot-2 {
							animation-delay: -0.16s;
						}

						&.dot-3 {
							animation-delay: 0s;
						}
					}
				}
			}

			.loading-text {
				font-size: 28rpx;
				color: #4a5568;
				font-weight: 500;
				line-height: 1.5;
				margin-bottom: 20rpx;
			}

			// è€å¿ƒç­‰å¾…æç¤º
			.patience-tips {
				background: linear-gradient(135deg, #f6ffed 0%, #e6f7ff 100%);
				border-radius: 16rpx;
				padding: 24rpx 20rpx;
				margin: 20rpx 0;
				border: 1rpx solid #d9f7be;

				.tip-item {
					display: block;
					font-size: 24rpx;
					color: #52c41a;
					margin-bottom: 8rpx;
					line-height: 1.4;

					&:last-child {
						margin-bottom: 0;
					}
				}
			}

			// æ—¶é—´æŒ‡ç¤ºå™¨
			.time-indicator {
				margin-top: 20rpx;
				padding: 16rpx;
				background: rgba(24, 144, 255, 0.1);
				border-radius: 12rpx;

				.time-text {
					display: block;
					font-size: 22rpx;
					color: #1890ff;
					margin-bottom: 4rpx;

					&:last-child {
						margin-bottom: 0;
					}
				}
			}
		}
	}

	@keyframes loading-wave {
		0% {
			left: -100%;
		}

		100% {
			left: 100%;
		}
	}

	@keyframes dot-bounce {

		0%,
		80%,
		100% {
			transform: scale(0);
		}

		40% {
			transform: scale(1);
		}
	}

	@keyframes ring-pulse {

		0%,
		100% {
			transform: scale(1);
			opacity: 0.3;
		}

		50% {
			transform: scale(1.1);
			opacity: 0.1;
		}
	}

	// æ–°å¢åŠ¨ç”»å…³é”®å¸§
	@keyframes progress-shimmer {
		0% {
			background-position: -200% 0;
		}

		100% {
			background-position: 200% 0;
		}
	}

	@keyframes stage-pulse {
		0% {
			transform: scale(1);
			box-shadow: 0 0 0 0 rgba(24, 144, 255, 0.7);
		}

		70% {
			transform: scale(1.05);
			box-shadow: 0 0 0 10rpx rgba(24, 144, 255, 0);
		}

		100% {
			transform: scale(1);
			box-shadow: 0 0 0 0 rgba(24, 144, 255, 0);
		}
	}

	@keyframes radar-pulse {
		0% {
			transform: translate(-50%, -50%) scale(0);
			opacity: 1;
		}

		100% {
			transform: translate(-50%, -50%) scale(1);
			opacity: 0;
		}
	}

	// åè®®æŸ¥çœ‹å¼¹çª—æ ·å¼
	.agreement-modal {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: rgba(0, 0, 0, 0.6);
		backdrop-filter: blur(10rpx);
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: 9999;
		animation: modal-fade-in 0.3s ease;

		.modal-container {
			background: linear-gradient(135deg, #fff 0%, #f8fafc 100%);
			border-radius: 32rpx;
			margin: 40rpx;
			max-width: 660rpx;
			max-height: 80vh;
			box-shadow: 0 20rpx 60rpx rgba(22, 119, 255, 0.2);
			border: 1rpx solid rgba(255, 255, 255, 0.8);
			animation: modal-scale-in 0.3s ease;
			display: flex;
			flex-direction: column;
		}

		.modal-header {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 40rpx 40rpx 0;
			border-bottom: 1rpx solid #e2e8f0;
			margin-bottom: 30rpx;

			.modal-title {
				font-size: 36rpx;
				font-weight: 700;
				color: #1a202c;
			}

			.close-btn {
				width: 60rpx;
				height: 60rpx;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 28rpx;
				color: #718096;
				background: #f7fafc;
				border-radius: 50%;
				transition: all 0.3s ease;

				&:active {
					background: #e2e8f0;
					color: #4a5568;
				}
			}
		}

		.modal-body {
			flex: 1;
			max-height: 60vh;
			padding: 0 40rpx;

			.agreement-content {
				font-size: 28rpx;
				color: #4a5568;
				line-height: 1.8;
				white-space: pre-line;
				word-wrap: break-word;
			}
		}

		.modal-footer {
			padding: 30rpx 40rpx 40rpx;
			border-top: 1rpx solid #e2e8f0;
			margin-top: 30rpx;

			.agreement-confirm-btn {
				width: 100%;
				height: 88rpx;
				background: linear-gradient(135deg, #1677ff 0%, #0958d9 100%);
				color: white;
				border: none;
				border-radius: 44rpx;
				font-size: 32rpx;
				font-weight: 600;
				box-shadow: 0 8rpx 24rpx rgba(22, 119, 255, 0.4);
				transition: all 0.3s ease;

				&:active {
					transform: scale(0.98);
					box-shadow: 0 4rpx 16rpx rgba(22, 119, 255, 0.6);
				}
			}
		}
	}



	@keyframes modal-fade-in {
		0% {
			opacity: 0;
		}

		100% {
			opacity: 1;
		}
	}

	@keyframes modal-scale-in {
		0% {
			opacity: 0;
			transform: scale(0.8);
		}

		100% {
			opacity: 1;
			transform: scale(1);
		}
	}

	@keyframes shake {

		0%,
		100% {
			transform: translateX(0);
		}

		10%,
		30%,
		50%,
		70%,
		90% {
			transform: translateX(-10rpx);
		}

		20%,
		40%,
		60%,
		80% {
			transform: translateX(10rpx);
		}
	}

	// æ°´å¹³æŠ–åŠ¨åŠ¨ç”»
	@keyframes shake-horizontal {

		0%,
		100% {
			transform: translateX(0);
		}

		10%,
		30%,
		50%,
		70%,
		90% {
			transform: translateX(-8rpx);
		}

		20%,
		40%,
		60%,
		80% {
			transform: translateX(8rpx);
		}
	}

	// æç¤ºæ¡†æ·¡å…¥åŠ¨ç”»
	@keyframes tip-fade-in {
		0% {
			opacity: 0;
			transform: translateX(-50%) translateY(-10rpx);
		}

		100% {
			opacity: 1;
			transform: translateX(-50%) translateY(0);
		}
	}
</style>