# é¢„çº¦ç»“æœé¡µé¢ä¼˜åŒ–è¯´æ˜

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

æ ¹æ®ç”¨æˆ·è§’è‰²å’Œå°åŒºå®¡æ ¸è§„åˆ™ï¼ŒåŠ¨æ€æ˜¾ç¤ºä¸åŒçš„é¢„çº¦ç»“æœæç¤ºä¿¡æ¯ï¼ŒåŒºåˆ†ä»¥ä¸‹åœºæ™¯ï¼š
1. **ç®¡å®¶é¢„çº¦** - æ— éœ€å®¡æ ¸ï¼Œè‡ªåŠ¨é€šè¿‡
2. **æ— éœ€å®¡æ ¸æ—¶é—´æ®µ** - æ ¹æ®å°åŒºé…ç½®ï¼ŒæŸäº›æ—¶é—´æ®µæ— éœ€å®¡æ ¸
3. **éœ€è¦å®¡æ ¸** - å¸¸è§„å®¡æ ¸æµç¨‹

## ğŸ”§ å®ç°æ–¹æ¡ˆ

### 1. æ•°æ®ç»“æ„æ‰©å±•

åœ¨ `data()` ä¸­æ–°å¢å­—æ®µï¼š
```javascript
data() {
  return {
    appointmentData: {
      // åŸæœ‰å­—æ®µ...
      auditstatus: '',    // å®¡æ ¸çŠ¶æ€
      venuestatus: ''     // å…¥åœºçŠ¶æ€
    },
    userRole: 'visitor',  // ç”¨æˆ·è§’è‰²
    needsAudit: true      // æ˜¯å¦éœ€è¦å®¡æ ¸
  }
}
```

### 2. æ ¸å¿ƒåˆ¤æ–­é€»è¾‘

#### ç”¨æˆ·è§’è‰²åˆ¤æ–­
```javascript
loadUserRole() {
  const userInfo = uni.getStorageSync('userInfo') || {};
  this.userRole = userInfo.role || userInfo.userInfo?.userkind || 'visitor';
}
```

#### å®¡æ ¸çŠ¶æ€åˆ¤æ–­
```javascript
determineAuditStatus() {
  // ç®¡å®¶ä»£äººé¢„çº¦æ— éœ€å®¡æ ¸
  if (this.userRole === 'manager' && this.appointmentData.appointType === 'ä»£äºº') {
    this.needsAudit = false;
    return;
  }
  
  // æ ¹æ®åç«¯è¿”å›çš„çŠ¶æ€åˆ¤æ–­
  const auditStatus = this.appointmentData.auditstatus || '';
  const venueStatus = this.appointmentData.venuestatus || '';
  
  if (auditStatus === 'ä¸å®¡æ ¸' || auditStatus === 'å·²é€šè¿‡' || venueStatus === 'å¾…å…¥åœº') {
    this.needsAudit = false;
  } else {
    this.needsAudit = true;
  }
}
```

### 3. åŠ¨æ€å†…å®¹æ˜¾ç¤º

#### çŠ¶æ€æ ‡é¢˜å’Œå‰¯æ ‡é¢˜
```javascript
computed: {
  statusTitle() {
    return 'é¢„çº¦æäº¤æˆåŠŸ'; // ç»Ÿä¸€æ ‡é¢˜
  },
  
  statusSubtitle() {
    if (this.userRole === 'manager' && this.appointmentData.appointType === 'ä»£äºº') {
      return 'ç®¡å®¶é¢„çº¦å·²è‡ªåŠ¨é€šè¿‡';
    }
    if (!this.needsAudit) {
      return 'é¢„çº¦å·²è‡ªåŠ¨é€šè¿‡ï¼Œå¯ç›´æ¥å…¥åœº';
    }
    return 'æ­£åœ¨ç­‰å¾…ç®¡å®¶å®¡æ ¸';
  }
}
```

#### çŠ¶æ€å›¾æ ‡
```javascript
statusIconType() {
  if (this.userRole === 'manager' && this.appointmentData.appointType === 'ä»£äºº') {
    return 'approved';
  }
  if (!this.needsAudit) {
    return 'approved';
  }
  return 'pending';
}
```

#### æé†’å†…å®¹
```javascript
reminderItems() {
  if (this.userRole === 'manager' && this.appointmentData.appointType === 'ä»£äºº') {
    return [
      'ç®¡å®¶é¢„çº¦æ— éœ€å®¡æ ¸ï¼Œå·²è‡ªåŠ¨é€šè¿‡',
      'è¯·é€šçŸ¥è®¿å®¢æŒ‰æ—¶åˆ°è¾¾ç°åœº',
      'å¦‚æœ‰å˜æ›´è¯·åŠæ—¶è”ç³»è®¿å®¢'
    ];
  }
  
  if (!this.needsAudit) {
    return [
      'è¯¥æ—¶é—´æ®µæ— éœ€å®¡æ ¸ï¼Œé¢„çº¦å·²ç”Ÿæ•ˆ',
      'è¯·æŒ‰æ—¶åˆ°è¾¾ç°åœº',
      'å¦‚æœ‰å˜æ›´è¯·åŠæ—¶è”ç³»ç®¡å®¶'
    ];
  }
  
  return [
    'ç®¡å®¶ä¼šåœ¨1-2å°æ—¶å†…å®Œæˆå®¡æ ¸',
    'è¯·ä¿æŒæ‰‹æœºç•…é€šï¼Œæ³¨æ„æ¥æ”¶å®¡æ ¸é€šçŸ¥',
    'å®¡æ ¸é€šè¿‡åè¯·æŒ‰æ—¶åˆ°è¾¾ç°åœº'
  ];
}
```

### 4. è§†è§‰æ•ˆæœä¼˜åŒ–

#### æ¨¡æ¿æ›´æ–°
```vue
<!-- åŠ¨æ€çŠ¶æ€å›¾æ ‡ -->
<view :class="['status-icon', statusIconType]">
  <text class="icon-text">{{ statusIconType === 'approved' ? 'âœ…' : 'â³' }}</text>
  <view v-if="statusIconType === 'pending'" class="pulse-ring"></view>
</view>

<!-- åŠ¨æ€æ ‡é¢˜ -->
<view class="status-title">{{ statusTitle }}</view>
<view class="status-subtitle">{{ statusSubtitle }}</view>

<!-- åŠ¨æ€æé†’å†…å®¹ -->
<view class="reminder-content">
  <view v-for="(item, index) in reminderItems" :key="index" class="reminder-item">
    <text class="reminder-dot">â€¢</text>
    <text class="reminder-text">{{ item }}</text>
  </view>
</view>
```

#### CSSæ ·å¼æ‰©å±•
```scss
.status-icon {
  &.approved {
    background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
    box-shadow: 0 8rpx 30rpx rgba(76, 175, 80, 0.4);
  }
  
  &.pending {
    background: linear-gradient(135deg, #ffa726 0%, #fb8c00 100%);
    box-shadow: 0 8rpx 30rpx rgba(255, 167, 38, 0.4);
  }
}
```

## ğŸ“‹ æµ‹è¯•åœºæ™¯

### åœºæ™¯1: ç®¡å®¶ä»£äººé¢„çº¦
- **è§¦å‘æ¡ä»¶**: `userRole === 'manager' && appointType === 'ä»£äºº'`
- **æ˜¾ç¤ºæ•ˆæœ**: ç»¿è‰²âœ…å›¾æ ‡ï¼Œ"ç®¡å®¶é¢„çº¦å·²è‡ªåŠ¨é€šè¿‡"
- **æé†’å†…å®¹**: ç®¡å®¶ç›¸å…³çš„æ“ä½œæç¤º

### åœºæ™¯2: æ— éœ€å®¡æ ¸æ—¶é—´æ®µ
- **è§¦å‘æ¡ä»¶**: `auditstatus === 'ä¸å®¡æ ¸'` æˆ– `venuestatus === 'å¾…å…¥åœº'`
- **æ˜¾ç¤ºæ•ˆæœ**: ç»¿è‰²âœ…å›¾æ ‡ï¼Œ"é¢„çº¦å·²è‡ªåŠ¨é€šè¿‡ï¼Œå¯ç›´æ¥å…¥åœº"
- **æé†’å†…å®¹**: ç›´æ¥å…¥åœºç›¸å…³æç¤º

### åœºæ™¯3: éœ€è¦å®¡æ ¸
- **è§¦å‘æ¡ä»¶**: å…¶ä»–æƒ…å†µ
- **æ˜¾ç¤ºæ•ˆæœ**: æ©™è‰²â³å›¾æ ‡ï¼Œå¸¦è„‰å†²åŠ¨ç”»ï¼Œ"æ­£åœ¨ç­‰å¾…ç®¡å®¶å®¡æ ¸"
- **æé†’å†…å®¹**: ä¼ ç»Ÿå®¡æ ¸æµç¨‹æç¤º

## ğŸ”„ åç«¯é…åˆ

åç«¯åœ¨åˆ›å»ºé¢„çº¦æ—¶ä¼šæ ¹æ®ä»¥ä¸‹é€»è¾‘è®¾ç½®çŠ¶æ€ï¼š

1. **ç®¡å®¶ä»£äººé¢„çº¦** (`appointtype === 'ä»£äºº'`)
   - `auditstatus = 'å·²é€šè¿‡'`
   - `venuestatus = 'å¾…å…¥åœº'`

2. **æ—¶é—´æ®µå®¡æ ¸åˆ¤æ–­** (`checkIfTimeSlotNeedsAudit()`)
   - æ— éœ€å®¡æ ¸: `auditstatus = 'ä¸å®¡æ ¸'`, `venuestatus = 'å¾…å…¥åœº'`
   - éœ€è¦å®¡æ ¸: `auditstatus = 'å¾…å®¡æ‰¹'`, `venuestatus = 'å¾…å®¡æ‰¹'`

## âœ… ä¼˜åŒ–æ•ˆæœ

1. **ç”¨æˆ·ä½“éªŒæå‡**: æ ¹æ®å®é™…æƒ…å†µæ˜¾ç¤ºå‡†ç¡®çš„çŠ¶æ€ä¿¡æ¯
2. **å‡å°‘å›°æƒ‘**: ç®¡å®¶é¢„çº¦å’Œæ— éœ€å®¡æ ¸åœºæ™¯ä¸å†æ˜¾ç¤º"ç­‰å¾…å®¡æ ¸"
3. **ä¿¡æ¯å‡†ç¡®**: æé†’å†…å®¹ä¸å®é™…æµç¨‹åŒ¹é…
4. **è§†è§‰åŒºåˆ†**: ä¸åŒçŠ¶æ€ä½¿ç”¨ä¸åŒçš„å›¾æ ‡å’Œé¢œè‰²
