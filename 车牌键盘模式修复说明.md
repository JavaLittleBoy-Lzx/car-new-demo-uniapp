# è½¦ç‰Œé”®ç›˜æ¨¡å¼æ™ºèƒ½åˆ‡æ¢ä¿®å¤è¯´æ˜

## é—®é¢˜æè¿°
åœ¨è½¦ç‰Œè¾“å…¥åŠŸèƒ½ä¸­ï¼Œå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
1. **æ–°èƒ½æºè½¦ç‰Œåˆ‡æ¢é—®é¢˜**ï¼šç¬¬ä¸€ä¸ªå­—ç¬¦è¿˜æœªè¾“å…¥æ—¶ï¼Œåˆ‡æ¢åˆ°æ–°èƒ½æºè½¦ç‰Œåï¼Œé”®ç›˜æ˜¾ç¤ºçš„æ˜¯æ•°å­—å­—æ¯ï¼Œè€Œä¸æ˜¯æ±‰å­—ï¼ˆçœä»½ï¼‰
2. **æ¨¡å¼åˆ‡æ¢é€»è¾‘ä¸æ¸…æ™°**ï¼šæ²¡æœ‰æ˜ç¡®æ§åˆ¶é”®ç›˜åœ¨ä½•æ—¶æ˜¾ç¤ºæ±‰å­—æ¨¡å¼ï¼Œä½•æ—¶æ˜¾ç¤ºæ•°å­—å­—æ¯æ¨¡å¼

## æ ¸å¿ƒéœ€æ±‚
- **ç¬¬ä¸€ä½æœªè¾“å…¥æ—¶**ï¼šå§‹ç»ˆæ˜¾ç¤ºæ±‰å­—é”®ç›˜ï¼ˆç”¨äºè¾“å…¥çœä»½ç®€ç§°ï¼‰
- **ç¬¬ä¸€ä½å·²è¾“å…¥å**ï¼šè‡ªåŠ¨åˆ‡æ¢åˆ°æ•°å­—å­—æ¯é”®ç›˜ï¼ˆç”¨äºè¾“å…¥åç»­å­—ç¬¦ï¼‰
- **åˆ‡æ¢è½¦ç‰Œç±»å‹æ—¶**ï¼šå¦‚æœæ¸…ç©ºäº†è¾“å…¥ï¼Œåº”è¯¥å›åˆ°æ±‰å­—é”®ç›˜
- **æ‰“å¼€å¼¹çª—æ—¶**ï¼šåˆå§‹çŠ¶æ€åº”è¯¥æ˜¯æ±‰å­—é”®ç›˜

## æŠ€æœ¯æ–¹æ¡ˆ

### é”®ç›˜ç»„ä»¶åˆ†æ
ä½¿ç”¨çš„æ˜¯ `xm-keyboard-box` ç»„ä»¶ï¼Œè¯¥ç»„ä»¶æœ‰ä¸¤ç§æ¨¡å¼ï¼š
- **mode = 0**ï¼šæ±‰å­—æ¨¡å¼ï¼ˆçœä»½ç®€ç§°é”®ç›˜ï¼‰
- **mode = 1**ï¼šæ•°å­—å­—æ¯æ¨¡å¼ï¼ˆè½¦ç‰Œå·ç é”®ç›˜ï¼‰

å…³é”®æ–¹æ³•ï¼š
```javascript
changeMode(v) {
  this.mode = v == void 0 ? (this.mode == 0 ? 1 : 0) : v
}
```
- æ— å‚æ•°è°ƒç”¨æ—¶ä¼šåˆ‡æ¢æ¨¡å¼ï¼ˆ0â†”1ï¼‰
- ä¼ å…¥å‚æ•°æ—¶ä¼šå¼ºåˆ¶è®¾ç½®ä¸ºæŒ‡å®šæ¨¡å¼

## ä¿®å¤å†…å®¹

### 1. æ˜¾ç¤ºé”®ç›˜æ—¶æ™ºèƒ½åˆå§‹åŒ–ï¼ˆ`showCarKeyboard`ï¼‰â­ **æœ€å…³é”®**
```javascript
// ğŸ¹ æ ¹æ®å½“å‰è¾“å…¥çŠ¶æ€åˆå§‹åŒ–é”®ç›˜æ¨¡å¼
this.$nextTick(() => {
  const keyboard = this.$refs.carKeyboardBox;
  if (keyboard && keyboard.changeMode) {
    // å¦‚æœæ²¡æœ‰è¾“å…¥æˆ–åªæœ‰ç©ºå­—ç¬¦ï¼Œæ˜¾ç¤ºæ±‰å­—é”®ç›˜
    if (!this.tempPlateNumber || this.tempPlateNumber.trim() === '' || this.carCurrentPlateChars.length === 0) {
      console.log('ğŸ”¤ [æ˜¾ç¤ºé”®ç›˜] æ— è¾“å…¥ï¼Œåˆå§‹åŒ–ä¸ºæ±‰å­—é”®ç›˜(mode=0)');
      keyboard.changeMode(0); // å¼ºåˆ¶è®¾ç½®ä¸ºæ±‰å­—æ¨¡å¼
    } else {
      // å·²æœ‰è¾“å…¥ï¼Œæ˜¾ç¤ºæ•°å­—å­—æ¯é”®ç›˜
      console.log('ğŸ”¤ [æ˜¾ç¤ºé”®ç›˜] å·²æœ‰è¾“å…¥ï¼Œåˆå§‹åŒ–ä¸ºæ•°å­—å­—æ¯é”®ç›˜(mode=1)');
      keyboard.changeMode(1); // å¼ºåˆ¶è®¾ç½®ä¸ºæ•°å­—å­—æ¯æ¨¡å¼
    }
  }
});
```

**è¯´æ˜**ï¼š
- ç”¨æˆ·ç‚¹å‡»è¾“å…¥æ¡†æ—¶è§¦å‘æ­¤æ–¹æ³•
- æ™ºèƒ½åˆ¤æ–­ï¼šæ— è¾“å…¥â†’æ±‰å­—é”®ç›˜ï¼Œæœ‰è¾“å…¥â†’æ•°å­—å­—æ¯é”®ç›˜
- è¿™æ˜¯æœ€å…³é”®çš„ä¿®å¤ï¼Œè§£å†³äº†"ç¬¬ä¸€æ¬¡æ‰“å¼€é”®ç›˜æ˜¾ç¤ºæ•°å­—å­—æ¯"çš„é—®é¢˜

### 2. æ‰“å¼€å¼¹çª—æ—¶åˆå§‹åŒ–ï¼ˆ`openCarInputModal`ï¼‰
```javascript
// ğŸ¹ æ‰“å¼€å¼¹çª—åï¼Œå¼ºåˆ¶åˆå§‹åŒ–é”®ç›˜ä¸ºæ±‰å­—æ¨¡å¼
this.$nextTick(() => {
  const keyboard = this.$refs.carKeyboardBox;
  if (keyboard && keyboard.changeMode) {
    console.log('ğŸ”¤ [æ‰“å¼€å¼¹çª—] å¼ºåˆ¶åˆå§‹åŒ–ä¸ºæ±‰å­—é”®ç›˜(mode=0)');
    keyboard.changeMode(0); // å¼ºåˆ¶è®¾ç½®ä¸ºæ±‰å­—æ¨¡å¼
  }
});
```

### 3. åˆ‡æ¢æ–°èƒ½æºè½¦ç‰Œæ—¶ï¼ˆ`tempSelectCarColor`ï¼‰
```javascript
if (colorType === 'green') {
  // æ¸…ç©ºè¾“å…¥
  this.tempPlateNumber = '';
  this.carCurrentPlateChars = [];
  this.maxCarLenght = 8;
  
  // ğŸ¹ å¼ºåˆ¶åˆ‡æ¢å›æ±‰å­—é”®ç›˜
  this.$nextTick(() => {
    const keyboard = this.$refs.carKeyboardBox;
    if (keyboard && keyboard.changeMode) {
      console.log('ğŸ”¤ [é¢œè‰²åˆ‡æ¢-æ–°èƒ½æº] å¼ºåˆ¶åˆ‡æ¢åˆ°æ±‰å­—é”®ç›˜(mode=0)');
      keyboard.changeMode(0); // å¼ºåˆ¶è®¾ç½®ä¸ºæ±‰å­—æ¨¡å¼
    }
  });
}
```

### 4. åˆ‡æ¢æ™®é€šè½¦ç‰Œæ—¶ï¼ˆ`tempSelectCarColor`ï¼‰
```javascript
else {
  this.maxCarLenght = 7;
  
  // ğŸ¹ å¦‚æœæ¸…ç©ºäº†è¾“å…¥ï¼Œåˆ‡æ¢å›æ±‰å­—é”®ç›˜
  if (!this.tempPlateNumber || this.tempPlateNumber.length === 0) {
    this.$nextTick(() => {
      const keyboard = this.$refs.carKeyboardBox;
      if (keyboard && keyboard.changeMode) {
        console.log('ğŸ”¤ [é¢œè‰²åˆ‡æ¢-æ™®é€š] å¼ºåˆ¶åˆ‡æ¢åˆ°æ±‰å­—é”®ç›˜(mode=0)');
        keyboard.changeMode(0); // å¼ºåˆ¶è®¾ç½®ä¸ºæ±‰å­—æ¨¡å¼
      }
    });
  }
}
```

### 5. ç¬¬ä¸€ä¸ªå­—ç¬¦è¾“å…¥åï¼ˆ`carInputAdd`ï¼‰
```javascript
// ğŸ¹ ç¬¬ä¸€ä¸ªå­—ç¬¦è¾“å…¥åï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°æ•°å­—å­—æ¯æ¨¡å¼
if (this.carCurrentPlateChars.length === 1 && this.$refs.carKeyboardBox) {
  console.log('ğŸ”¤ [è½¦ç‰Œè¾“å…¥] ç¬¬ä¸€ä¸ªå­—ç¬¦å·²è¾“å…¥ï¼Œåˆ‡æ¢åˆ°æ•°å­—å­—æ¯æ¨¡å¼');
  
  this.$nextTick(() => {
    const keyboard = this.$refs.carKeyboardBox;
    if (keyboard && keyboard.changeMode) {
      console.log('ğŸ¹ å¼ºåˆ¶åˆ‡æ¢åˆ°æ•°å­—å­—æ¯é”®ç›˜(mode=1)');
      keyboard.changeMode(1); // å¼ºåˆ¶è®¾ç½®ä¸ºæ•°å­—å­—æ¯æ¨¡å¼
    }
  });
}
```

### 6. åˆ é™¤åˆ°ç©ºæ—¶ï¼ˆ`carInputDel`ï¼‰
```javascript
// ğŸ¹ åˆ é™¤åˆ°ç©ºæ—¶ï¼Œåˆ‡æ¢å›çœä»½é€‰æ‹©æ¨¡å¼
if (this.carCurrentPlateChars.length === 0 && this.$refs.carKeyboardBox) {
  console.log('ğŸ”¤ [è½¦ç‰Œåˆ é™¤] åˆ é™¤å®Œæ¯•ï¼Œåˆ‡æ¢å›æ±‰å­—é”®ç›˜');
  this.$nextTick(() => {
    const keyboard = this.$refs.carKeyboardBox;
    if (keyboard && keyboard.changeMode) {
      console.log('ğŸ¹ å¼ºåˆ¶åˆ‡æ¢åˆ°æ±‰å­—é”®ç›˜(mode=0)');
      keyboard.changeMode(0); // å¼ºåˆ¶è®¾ç½®ä¸ºæ±‰å­—æ¨¡å¼
    }
  });
}
```

### 7. æ¸…ç©ºæ“ä½œæ—¶ï¼ˆ`carInputClear`ï¼‰
```javascript
// ğŸ¹ æ¸…ç©ºååˆ‡æ¢å›æ±‰å­—é”®ç›˜
this.$nextTick(() => {
  const keyboard = this.$refs.carKeyboardBox;
  if (keyboard && keyboard.changeMode) {
    console.log('ğŸ”¤ [è½¦ç‰Œæ¸…ç©º] å¼ºåˆ¶åˆ‡æ¢åˆ°æ±‰å­—é”®ç›˜(mode=0)');
    keyboard.changeMode(0); // å¼ºåˆ¶è®¾ç½®ä¸ºæ±‰å­—æ¨¡å¼
  }
});
```

## ä¿®å¤æ•ˆæœ

### âœ… è§£å†³çš„é—®é¢˜
1. **æ–°èƒ½æºåˆ‡æ¢æ­£å¸¸**ï¼šåˆ‡æ¢åˆ°æ–°èƒ½æºè½¦ç‰Œåï¼Œé”®ç›˜æ­£ç¡®æ˜¾ç¤ºæ±‰å­—ï¼ˆçœä»½ï¼‰
2. **æ™®é€šè½¦ç‰Œåˆ‡æ¢æ­£å¸¸**ï¼šåˆ‡æ¢åˆ°æ™®é€šè½¦ç‰Œåï¼Œå¦‚æœè¾“å…¥ä¸ºç©ºï¼Œé”®ç›˜æ˜¾ç¤ºæ±‰å­—
3. **è¾“å…¥æµç¨‹æµç•…**ï¼š
   - æ‰“å¼€å¼¹çª— â†’ æ±‰å­—é”®ç›˜
   - è¾“å…¥çœä»½ â†’ è‡ªåŠ¨åˆ‡æ¢åˆ°æ•°å­—å­—æ¯é”®ç›˜
   - åˆ é™¤åˆ°ç©º â†’ è‡ªåŠ¨åˆ‡æ¢å›æ±‰å­—é”®ç›˜
   - æ¸…ç©ºæ“ä½œ â†’ è‡ªåŠ¨åˆ‡æ¢å›æ±‰å­—é”®ç›˜
4. **é€»è¾‘æ¸…æ™°**ï¼šæ‰€æœ‰æ¨¡å¼åˆ‡æ¢éƒ½ä½¿ç”¨å¼ºåˆ¶è®¾ç½®ï¼Œé¿å…çŠ¶æ€æ··ä¹±

### ğŸ¯ ç”¨æˆ·ä½“éªŒæå‡
- æ— éœ€æ‰‹åŠ¨ç‚¹å‡»"ä¸­/è‹±"åˆ‡æ¢æŒ‰é’®
- é”®ç›˜æ¨¡å¼ä¸è¾“å…¥çŠ¶æ€å§‹ç»ˆä¿æŒä¸€è‡´
- æ”¯æŒ7ä½æ™®é€šè½¦ç‰Œå’Œ8ä½æ–°èƒ½æºè½¦ç‰Œçš„æ™ºèƒ½åˆ‡æ¢

## æµ‹è¯•åœºæ™¯

### åœºæ™¯1ï¼šæ–°èƒ½æºè½¦ç‰Œè¾“å…¥
1. æ‰“å¼€è½¦ç‰Œè¾“å…¥å¼¹çª— â†’ åº”æ˜¾ç¤ºæ±‰å­—é”®ç›˜ âœ…
2. é€‰æ‹©ç»¿è‰²ï¼ˆæ–°èƒ½æºï¼‰â†’ åº”æ˜¾ç¤ºæ±‰å­—é”®ç›˜ âœ…
3. è¾“å…¥"äº¬" â†’ è‡ªåŠ¨åˆ‡æ¢åˆ°æ•°å­—å­—æ¯é”®ç›˜ âœ…
4. è¾“å…¥"AD12345" â†’ å®Œæˆ8ä½æ–°èƒ½æºè½¦ç‰Œ âœ…

### åœºæ™¯2ï¼šæ™®é€šè½¦ç‰Œè¾“å…¥
1. æ‰“å¼€è½¦ç‰Œè¾“å…¥å¼¹çª— â†’ åº”æ˜¾ç¤ºæ±‰å­—é”®ç›˜ âœ…
2. è¾“å…¥"äº¬" â†’ è‡ªåŠ¨åˆ‡æ¢åˆ°æ•°å­—å­—æ¯é”®ç›˜ âœ…
3. è¾“å…¥"A12345" â†’ å®Œæˆ7ä½æ™®é€šè½¦ç‰Œ âœ…

### åœºæ™¯3ï¼šé¢œè‰²åˆ‡æ¢
1. è¾“å…¥"äº¬A123" â†’ å½“å‰æ˜¯æ•°å­—å­—æ¯é”®ç›˜
2. åˆ‡æ¢åˆ°ç»¿è‰²ï¼ˆæ–°èƒ½æºï¼‰â†’ æ¸…ç©ºè¾“å…¥ï¼Œæ˜¾ç¤ºæ±‰å­—é”®ç›˜ âœ…
3. åˆ‡æ¢å›è“è‰²ï¼ˆæ™®é€šï¼‰â†’ ä¿æŒæ±‰å­—é”®ç›˜ âœ…

### åœºæ™¯4ï¼šåˆ é™¤æ“ä½œ
1. è¾“å…¥"äº¬" â†’ æ•°å­—å­—æ¯é”®ç›˜
2. åˆ é™¤"äº¬" â†’ è‡ªåŠ¨åˆ‡æ¢å›æ±‰å­—é”®ç›˜ âœ…

### åœºæ™¯5ï¼šæ¸…ç©ºæ“ä½œ
1. è¾“å…¥"äº¬A123" â†’ æ•°å­—å­—æ¯é”®ç›˜
2. ç‚¹å‡»"æ¸…ç©º"æŒ‰é’® â†’ è‡ªåŠ¨åˆ‡æ¢å›æ±‰å­—é”®ç›˜ âœ…

## å…³é”®æŠ€æœ¯ç‚¹

### 1. ä½¿ç”¨ `$nextTick` ç¡®ä¿DOMæ›´æ–°
```javascript
this.$nextTick(() => {
  const keyboard = this.$refs.carKeyboardBox;
  // ...
});
```

### 2. å¼ºåˆ¶æ¨¡å¼è®¾ç½®è€Œéåˆ‡æ¢
```javascript
keyboard.changeMode(0);  // âœ… å¼ºåˆ¶è®¾ç½®ä¸ºæ±‰å­—æ¨¡å¼
keyboard.changeMode(1);  // âœ… å¼ºåˆ¶è®¾ç½®ä¸ºæ•°å­—å­—æ¯æ¨¡å¼
// è€Œä¸æ˜¯
keyboard.changeMode();   // âŒ åˆ‡æ¢æ¨¡å¼ï¼ˆä¸ç¡®å®šæœ€ç»ˆçŠ¶æ€ï¼‰
```

### 3. å®Œæ•´çš„è°ƒè¯•æ—¥å¿—
æ‰€æœ‰å…³é”®æ“ä½œéƒ½æ·»åŠ äº†è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ï¼š
- `ğŸ”¤ [æ‰“å¼€å¼¹çª—]`
- `ğŸ”¤ [é¢œè‰²åˆ‡æ¢-æ–°èƒ½æº]`
- `ğŸ”¤ [é¢œè‰²åˆ‡æ¢-æ™®é€š]`
- `ğŸ”¤ [è½¦ç‰Œè¾“å…¥]`
- `ğŸ”¤ [è½¦ç‰Œåˆ é™¤]`
- `ğŸ”¤ [è½¦ç‰Œæ¸…ç©º]`

## æ–‡ä»¶ä½ç½®
- **ä¿®æ”¹æ–‡ä»¶**ï¼š`pagesA/reservation/form.vue`
- **ç›¸å…³ç»„ä»¶**ï¼š`uni_modules/xm-keyboard/components/xm-keyboard-box/xm-keyboard-box.vue`

## ä¿®å¤æ—¥æœŸ
2024å¹´12æœˆ1æ—¥
